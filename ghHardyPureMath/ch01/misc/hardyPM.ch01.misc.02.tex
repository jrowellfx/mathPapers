\documentclass{article}

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)
\usepackage{lmodern}

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{letterpaper} % or letterpaper (US) or a5paper or....
\geometry{margin=1.35in} % for example, change the margins to 2 inches all round

\usepackage{graphicx} % support the \includegraphics command and options

\usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy/
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
%\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

% JPR added
\usepackage{fontawesome}
\usepackage{amsfonts}
%\usepackage{amsmath}
\usepackage{mathtools}% includes amsmath
\usepackage{changepage}
\usepackage{enumerate}
%\usepackage{setspace}
\usepackage{relsize}
\usepackage{wasysym}
%\usepackage{romannum}
\usepackage{perpage}
\usepackage[bottom]{footmisc}
\MakePerPage{footnote}

\newcommand{\jprVersion}{v62} % version
 
\usepackage[pdftex,
            pdfauthor={James Philip Rowell},
            pdftitle={\jobname.\jprVersion},
            pdfsubject={Proof of Chapter 1, Miscellaneous Examples, Number 2 from G.H. Hardy `A Course of Pure Mathematics'.},
            pdfkeywords={rational numbers, theorem, proof, mathematics, number theory, factorial, factoradic, Hardy, Examples, A Course of Pure Mathematics},
            pdfproducer={Latex},
            pdfcreator={miktex or pdflatex}]{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,      
    urlcolor=blue,
}
\usepackage{hyperxmp}
\hypersetup{
    pdfauthor={James Philip Rowell},
    pdfcopyright={Copyright 2018-2019 by James Philip Rowell. All rights reserved.}
}
\usepackage{lipsum}

\newenvironment{jprIn}{\begin{adjustwidth}{2em}{}}{\end{adjustwidth}}
\addtolength{\skip\footins}{6pt}

\usepackage{alphalph}
\makeatletter
\newalphalph{\fnsymbolwrap}[wrap]{\@fnsymbol}{}
\makeatother
\renewcommand*{\thefootnote}{%
  \fnsymbolwrap{\value{footnote}}%
}

\DeclarePairedDelimiter\abs{\lvert}{\rvert}

%%% END Article customizations

\title{\vspace{-1.5cm}Factorial Basis Representation of Rational Numbers}
\author{James Philip Rowell}
\date{\vspace{-0.5cm}\footnotesize\today\ (\jprVersion)} % Activate to display a given date or no date (if empty), otherwise the current date is printed 
\begin{document}
\maketitle

Miscellaneous example-2\footnote{`Examples' is the term Hardy uses for `Exercises'
or `Questions' in his textbook.} at the end
of chapter 1 in G. H. Hardy's `A Course of Pure Mathematics'
presents us with, and asks us to prove, a fascinating result.
The theorem feels like what the `\href {https://www.dropbox.com/s/bwmrffmkcidnf27/basisReprThm.pdf?dl=0}
{basis-representation-theorem}'
is for integers, but for rational numbers \dots{} beautiful!

\section*{Factorial Representation Theorem\footnote{The theorem is not named in the textbook, so I named it.}}

Any positive rational number can be expressed in one and only one way in the form
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
a_1 + \frac{a_2}{1\cdot{}2}
+ \frac{a_3}{1\cdot{}2\cdot{}3}
+ \dots{}
+ \frac{a_k}{1\cdot{}2\cdot{}3\cdot{}\dots{}\cdot{}k},
\end{equation*}
\end{center}
\egroup
}

where \(a_1, a_2, \dots{}, a_k\) are integers, and

{\small
\begin{center}
\(0\le{}a_1,\quad 0\le{}a_2<2,\quad 0\le{}a_3<3,\quad \dots{},\quad 0<a_k<k\)
\end{center}
}

\section*{Observations that led me to the proof.}

Any positive rational number\footnote{Almost every variable,
or constant (eg. \(a_1, a_k, m, n, i, p, q\)) in this
paper is going to represent a non-negative integer, or occasionally a rational-number;
However, we will almost always describe a rational-number in terms of one integer divided
by another integer, like \(\frac{p}{q}\).}, say \(\frac{m}{q}\), can be
written as an
integer part, \(i\), plus a fractional\newline part, \(\frac{p}{q}\), such that
\(\frac{m}{q} = i + \frac{p}{q}\), where \(0 \le{} \frac{p}{q} < 1\).

So trying to represent any positive
rational number \(\frac{m}{q}\) in the form of the theorem, the integer \(a_1\)
wants to play the role of the integer part, \(i\),
and the remainder of the expression \(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
looks to be playing the role of the rational part, \(\frac{p}{q}\), where,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
0 \le{} 
\frac{a_2}{2!}
+ \frac{a_3}{3!}
+ \dots{}
+ \frac{a_k}{k!}
< 1
\end{equation*}
\end{center}
\egroup
}

It seemed a good idea to forget about the integer \(a_1\)
and just focus on the integers \(a_2, a_3, \dots{}, a_k\).
In other words,
first prove a restricted form of the theorem for rational numbers between zero and one,
then later prove the full theorem by re-introducing the \(a_1\) to get all positive rational numbers.
Furthermore, including zero (that is, not just \emph{positive} rational numbers) was also
going to make things easier with this approach.

At first, it wasn't obvious how I'd go about calculating
the values of the integers \(a_2, a_3, \dots{}, a_k\) for a given number
\(\frac{p}{q}\).
However, after playing around for a while I discovered that
it's similar to doing long-division. At this point
a few patterns started to jump out.
For example, look at these sums using the maximum-values for each \(a_i\),

{\small
\bgroup
\setlength{\abovedisplayskip}{0pt}
\setlength{\belowdisplayskip}{0pt}
\begin{gather*}
\frac{1}{1\cdot{}2}
= \frac{1}{2}
= \frac{2!-1}{2!}\\
\frac{1}{1\cdot{}2}
+ \frac{2}{1\cdot{}2\cdot{}3}
= \frac{1\cdot{}3}{1\cdot{}2\cdot{}3}
+ \frac{2}{1\cdot{}2\cdot{}3}
= \frac{3+2}{6}
= \frac{5}{6}
= \frac{3!-1}{3!}\\
\frac{1}{1\cdot{}2}
+ \frac{2}{1\cdot{}2\cdot{}3}
+ \frac{3}{1\cdot{}2\cdot{}3\cdot{}4}
= \frac{1\cdot{}3\cdot{}4}{1\cdot{}2\cdot{}3\cdot{}4}
+ \frac{2\cdot{}4}{1\cdot{}2\cdot{}3\cdot{}4}
+ \frac{3}{1\cdot{}2\cdot{}3\cdot{}4}
= \frac{12+8+3}{24}
= \frac{23}{24}
= \frac{4!-1}{4!}
\end{gather*}
\egroup
}

An obvious pattern emerged!
By assigning the largest possible values to the variables,
the sum is \(\frac{k!-1}{k!}\),
which is as close to 1 as possible without actually
hitting 1. (What is \(\frac{1}{k!} + \frac{k!-1}{k!}\)?)
This turned out to be
a pretty useful observation, and it became `Lemma 1' in what follows.

On the other end of the scale, assigning zeros to all the variables 
gives us a sum of zero.
Furthermore
I could make
the smallest \emph{positive} number, \(\frac{1}{k!}\), by
letting all the variables be zero \emph{except} for \(a_k = 1\).
Then I considered what happens to the variables by
adding \(\frac{1}{k!}\) to it, repeatedly, over and over.

So by making various assignments of values to
the variables \(a_2, a_3, \dots{}, a_k\) I could
generate the smallest numbers, \(\frac{0}{k!}, \frac{1}{k!}, \frac{2}{k!}\), etc.
as well as the largest,
\(\frac{k!-1}{k!}\).
Then I realized that I could count the number of possible sums that might be formed 
with the expression.

There are two choices for the \(a_2\) variable (0 and 1),
combined with three choices for the \(a_3\) variable (0, 1 and 2),
combined with four choices for the \(a_4\) variable (0, 1, 2, 3),
\dots{} combined with \(k\) choices for
the \(a_k\) variable (0, 1, 2, \dots{}, \(k\!-\!1\)), which
gives us \(2\cdot{}3\cdot{}4\cdot{}\cdot{}\cdot{}k = k!\) possibly different sums.

Hmmm, the following set has \(k!\) members,
\(\{\frac{0}{k!},\enspace \frac{1}{k!},\enspace \frac{2}{k!},
\enspace \dots{},\enspace \frac{k!-1}{k!}\}\).
By forming another set out of all possible sums from the expression
it seemed like it would be fairly easy to show that the two sets are identical.

Another insight was that in order to be able to represent
a fraction with a prime-number denominator (say \(p\))
then the sum in our
expression would \emph{have to contain} this term,
\(\frac{a_p}{p!}\),
with a non-zero value of \(a_p\).

This led me to the realization that any fraction \(\frac{m}{k}\)
should be able to be represented by the expression
if the terms went so far as to include \(\frac{a_k}{k!}\). For that
matter by using terms up to \(\frac{a_k}{k!}\), then I'd
also be able to represent all fractions with
\((k-1)\) as the denominator or 
\((k-2)\) as the denominator, or \dots{}
4, 3, or 2 as the denominator. In other words,
\(\frac{1}{2}\),
\(\frac{1}{3}\),
\(\frac{2}{3}\),
\(\frac{1}{4}\),
\(\frac{2}{4}\),
\(\frac{3}{4}\),
\(\frac{1}{5}\),
\(\frac{2}{5}\),
\(\frac{3}{5}\),
\(\frac{4}{5}\),
\(\dots{}\),
\(\frac{1}{k-1}\),
\(\frac{2}{k-1}\),
\(\frac{3}{k-1}\),
\(\frac{4}{k-1}\),
\(\dots{}\),
\(\frac{k-3}{k-1}\),
\(\frac{k-2}{k-1}\),
\(\frac{1}{k}\),
\(\frac{2}{k}\),
\(\frac{3}{k}\),
\(\frac{4}{k}\),
\(\dots{}\),
\(\frac{k-2}{k}\),
\(\frac{k-1}{k}\)
should \emph{all} be
representable with the expression 
\(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\). 

So by using a set to collect all the numbers generated
by the expression \(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\),
then letting \(k\) grow without bound
I should get a set that contains \emph{all} the rational numbers between zero and one!

Those ideas are behind the proof that follows.

\break
\section*{Lemma 1}
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-1}{k!} = \frac{k!-1}{k!},\quad \text{for all integers } k \ge{} 2
\end{equation*}
\end{center}
\egroup
}
\subsubsection*{Proof}

By induction: When \(k = 2\) it's clear that \(\frac{1}{2!} = \frac{2!-1}{2!}\).

So assuming the lemma is true for \(k = n\), we show that it must be true for \(k = n + 1\):

{\scriptsize
\begin{alignat*}{1}
\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{n-1}{n!} + \frac{n}{(n+1)!}
  =\  &\frac{n!-1}{n!} + \frac{n}{(n+1)!}\\
  =\  &\frac{(n+1)(n!-1)}{(n+1)\cdot{}n!} + \frac{n}{(n+1)!}\\
  =\  &\frac{(n+1)!-(n+1)+n}{(n+1)!}\\
  =\  &\frac{(n+1)!-1}{(n+1)!}
\end{alignat*}
}
\dots{}thus establishing Lemma 1 for all values of \(k \ge 2\).\hspace*{\fill}QED

\vspace{18pt}
The following lemma captures an idea that is perhaps most easily grasped by analogy to the
basis-representation-theorem for integers. For base-ten numbers we can say,

\begin{center}
{\footnotesize\(1\cdot{}10^k >
9\cdot{}10^{k-1}
+ 9\cdot{}10^{k-2}
+ \dots{}
+ 9\cdot{}10^{2}
+ 9\cdot{}10^{1}
+ 9\cdot{}10^{0}
\)}
\end{center}

The above inequality 
is merely stating that any single power of ten is bigger than nine (the largest `digit')
times the sum of
every smaller power of ten.  For example, 1000 is bigger than 999.
Read the statement of the inequality in Lemma 2 with this idea in mind.

\section*{Lemma 2}

For integers \(i,k\) where \(2\le{}i<k\),

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{i!} >
\frac{i}{(i+1)!}
+ \frac{i+1}{(i+2)!}
+ \dots{}
+ \frac{k-2}{(k-1)!}
+ \frac{k-1}{k!}
\end{equation*}
\end{center}
\egroup
}
\subsubsection*{Proof}
{\scriptsize
\bgroup
\setlength{\abovedisplayskip}{0pt}
\begin{align*}
\frac{i}{(i+1)!} + \frac{i+1}{(i+2)!} + \dots{} + \frac{k-2}{(k-1)!} + \frac{k-1}{k!}
  =\  &(\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-1}{k!})
  - (\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{i-1}{i!})\\
  =\  &\frac{k!-1}{k!} - \frac{i!-1}{i!}\qquad \qquad \text{(by Lemma 1)}\\
  =\  &\frac{k!}{k!} - \frac{1}{k!} - \frac{i!}{i!} + \frac{1}{i!}\\
  =\  &\frac{1}{i!} - \frac{1}{k!}\\
  <\  &\frac{1}{i!}
\end{align*}
\egroup
}
\hspace*{\fill}QED

\section*{Definitions}

For integer \(k \ge 2\), and integers \(a_2, a_3, \dots{}, a_k\), we define the following sets,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{gather*}
\mathcal{S}_k = \{\ s\ \mid\enspace s = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!},\ \text{for all }
0\! \le{}\! a_2\! <\! 2,\enspace 
0\! \le{}\! a_3\! <\! 3,\enspace 
\dots{},\enspace 0\! \le{}\! a_k\! <\! k\},\\
\mathcal{F}_k = \{\frac{0}{k!},\enspace \frac{1}{k!},\enspace \frac{2}{k!},\enspace \dots{},\enspace \frac{k!-1}{k!}\}
\end{gather*}
\end{center}
\egroup
}

Naming ``\(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)'':
\begin{jprIn}
{Let \(s \in \mathcal{S}_k\) such that \(s = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\),
for some \(a_2, a_3, \dots{}, a_k\), 
where
\(k \ge{} 2\), and {\footnotesize\(0\!\le{}\!a_2\!<\!2,\enspace
0\!\le{}\!a_3\!<\!3,\enspace
\dots{},\enspace 0\!\le{}\!a_k\!<\!k\)}.
The expression ``\(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)'' is called
``The Factorial-Representation of \(s\)''.}
\end{jprIn}

\section*{Lemma 3}

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\mathcal{S}_k = \mathcal{F}_k
\end{equation*}
\end{center}
\egroup
}

\subsubsection*{Proof}

Two sets are equal if and only if they have the same elements\footnote{If
that isn't clear:
\((\mathcal{X} = \mathcal{Y}) \Leftrightarrow (\forall a;
a \in \mathcal{X} \Leftrightarrow a \in \mathcal{Y})\).}.

We're going to establish the equality
of \(\mathcal{S}_k\) and \(\mathcal{F}_k\) by showing that some key properties
of the two sets are the same; then by the
pigeon-hole principle
each element from one set must be equal to exactly one element from the other set.
Note that we will not describe how to equate one specific element
to the other, just that it must be true that there is a one-to-one equality between such pairs.

To begin with, it's clear that the set \(\mathcal{F}_k\) contains \emph{every} rational number
of the form \(\frac{p}{k!}\)
where \(p\) is an integer and \mbox{\(0\le{}\frac{p}{k!}<1\)} and
that the size of \(\mathcal{F}_k\) is \(k!\) (i.e.; \(\left|\mathcal{F}_k\right| = k!\)).

That takes care of everything we need to know
about \(\mathcal{F}_k\); now on to show that \(\mathcal{S}_k\) has these same qualities.

The smallest member of the set \(\mathcal{S}_k\) 
is \(\frac{0}{k!}\) and
occurs when all the variables are set to zero.
Furthermore, the largest member of the set occurs when all the variables are set to
their maximum value, which sums to \(\frac{k!-1}{k!}\) as shown in Lemma 1.

We also note that every member \(s \in \mathcal{S}_k\) can be written as a rational number
with \(k!\) as the denominator, like so,

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
s = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_{k-1}}{(k-1)!} + \frac{a_k}{k!}
= \frac{k\cdot{}(k-1)\cdot{}\cdot{}\cdot{}3\cdot{}a_2}{k!}
+ \frac{k\cdot{}(k-1)\cdot{}\cdot{}\cdot{}4\cdot{}a_2}{k!}
+ \dots{}
+ \frac{k\cdot{}a_{k-1}}{k!}
+ \frac{a_k}{k!}
\end{equation*}
\end{center}
\egroup
}

\break
Therefore any member \(s \in \mathcal{S}_k\) can be written as
\(s = \frac{p}{k!}\) for some integer \(p\), where

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
0 = \frac{0}{k!} \le{} \frac{p}{k!} \le{} \frac{k!-1}{k!} < \frac{k!}{k!} = 1,
\text{\quad hence,\quad}
0 \le{} \frac{p}{k!} < 1
\text{\quad i.e.;\quad}
0 \le{} s < 1.
\end{equation*}
\end{center}
\egroup
}

We now show that each possible assignment of values to the variables of
the factorial-representation of \(s \in \mathcal{S}_k\)
produces a \emph{unique} member of the set \(\mathcal{S}_k\).

For if this weren't true and both
\(s = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\) and
\(s = \frac{b_2}{2!} + \frac{b_3}{3!} + \dots{} + \frac{b_k}{k!}\)
for different variables \(a_2, a_3, \dots{}, a_k\)
and \(b_2, b_3, \dots{}, b_k\), then we can arrive at a contradiction as follows.

Suppose \(a_i\ne{}b_i\), where \(i \le{} k\), is the first such pair of variables
that differ. In other words,
\(a_2\!=\!b_2,\ a_3\!=\!b_3, \dots{},\ a_{i-1}\!=\!b_{i-1},\ a_i\!\ne{}\!b_i\).
Without loss of generality, further suppose that \(a_i > b_i\).
It follows that,

{\footnotesize
\bgroup
\setlength{\abovedisplayskip}{0pt}
\setlength{\belowdisplayskip}{0pt}
\begin{alignat}{3}
  &&\frac{a_i}{i!}
  + \frac{a_{i+1}}{(i+1)!}
  + \frac{a_{i+2}}{(i+2)!}
  + \dots{}
  % + \frac{a_{k-1}}{(k-1)!}
  + \frac{a_k}{k!}
  &= \frac{b_i}{i!}
  + \frac{b_{i+1}}{(i+1)!}
  + \frac{b_{i+2}}{(i+2)!}
  + \dots{}
  % + \frac{b_{k-1}}{(k-1)!}
  + \frac{b_k}{k!} \nonumber \\
  &\Leftrightarrow\quad &\frac{a_i - b_i}{i!}
  &= \frac{b_{i+1} - a_{i+1}}{(i+1)!}
  + \frac{b_{i+2} - a_{i+2}}{(i+2)!}
  + \dots{}
  % + \frac{b_{k-1} - a_{k-1}}{(k-1)!}
  + \frac{b_k - a_k}{k!} \label{eqn1}
\end{alignat}
\egroup
}%\vspace{-4mm}

But \(a_i - b_i \ge{} 1\), so

\begin{center}
\(\frac{a_i - b_i}{i!} \ge{} \frac{1}{i!}\).
\end{center}

Furthermore, let's examine
one of the terms
on the right-side of \eqref{eqn1}, say
the first one \(\frac{b_{i+1} - a_{i+1}}{(i+1)!}\). We can see that since
\(0 \le b_{i+1} \le{} i\) and \(0 \le a_{i+1} \le{} i\), so \((i - 0) \ge{} (b_{i+1} - a_{i+1})\), therefore,

\begin{center}
\(\frac{i - 0}{(i+1)!} \ge{} \frac{b_{i+1} - a_{i+1}}{(i+1)!}\).
\end{center}

Similarly by extending this idea to the other terms,

\begin{center}
\(
\frac{i}{(i+1)!}
+ \frac{i+1}{(i+2)!}
+ \dots{} + \frac{k-1}{k!} \ge{}
\frac{b_{i+1} - a_{i+1}}{(i+1)!}
+ \frac{b_{i+2} - a_{i+2}}{(i+2)!}
+ \dots{} + \frac{b_k - a_k}{k!}\).
\end{center}

Lastly, Lemma 2 tells us that \(\frac{1}{i!} > 
\frac{i}{(i+1)!}
+ \frac{i+1}{(i+2)!}
+ \dots{} + \frac{k-1}{k!}\), so
we can string all our inequalities together as follows,

\begin{center}
\(\frac{a_i - b_i}{i!} \ge{} \frac{1}{i!} > \frac{i}{(i+1)!} + \dots{} + \frac{k-1}{k!} \ge{} \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\),
\end{center}

and hence,

\begin{center}
\(\frac{a_i - b_i}{i!} > \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\),
\end{center}

But in equation \eqref{eqn1},
\(\frac{a_i - b_i}{i!} = \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\),
which provides the desired contradiction.

Therefore our assumption that there can be a different list
of variables representing the same rational number \(s \in \mathcal{S}_k\) must be false.
Therefore any assignment of values to the variables of the factorial-representation of \(s\)
produces a \emph{unique} member of the set \(\mathcal{S}_k\).

Now we can count the number of members of \(\mathcal{S}_k\), by looking at all the
possible combinations of values for the variables \(a_2, a_3, \dots{}, a_k\).
There are 2 choices for the variable \(a_2\),
combined with 3 choices for \(a_3\),
combined with 4 choices for \(a_4\),
\dots{},
combined with \(k\) choices for \(a_k\).

Therefore the total number of combinations of values
that can be assigned to the variables of
the factorial-representation of \(s\)
is \(2\cdot{}3\cdot{}4\cdot\cdot{}\cdot{}k = k!\). Since each possible assignment of values
to the variables
creates a \emph{unique} member of \(\mathcal{S}_k\),
then \(\left|\mathcal{S}_k\right| = k! = \left|\mathcal{F}_k\right|\).

Recalling from above that any 
member \(s \in \mathcal{S}_k\),
can be written as \(s = \frac{p}{k!}\), for some \(p\) where 
\(0\le{}\frac{p}{k!}<1\), and that \(\mathcal{F}_k\) contains \emph{every} such number,
then by the pigeon-hole principle it follows that \(\mathcal{S}_k = \mathcal{F}_k\).

\hspace*{\fill}QED

\section*{Corollary to Lemma 3}

The factorial-representation for every non-negative rational number \(\frac{p}{k!} \in \mathcal{F}_k\) is 
\emph{unique}.

The corollary is a direct result of the fact that
the sets
\(\mathcal{F}_k\) and
\(\mathcal{S}_k\) are equal.

\section*{Definitions}

{\small
\begin{gather*}
\mathcal{F} = \bigcup\limits_{k=2}^{\infty} \mathcal{F}_k \\
\mathcal{S} = \bigcup\limits_{k=2}^{\infty} \mathcal{S}_k \\
\mathbb{Q}_{01} = \{0\} \cup \{\ \frac{p}{q}\ \mid p, q \in \mathbb{Z},\text{ where } q \ge{} 2,\ 1 \le{} p < q,
\text{ and } \gcd(p,q) = 1\}
\end{gather*}
}

\(\mathcal{F}\) is the set of ALL non-negative rational numbers, less than one, that could be
formed with any factorial as the denominator.

\(\mathcal{S}\) is the set of ALL non-negative rational numbers, less than one,
formed by every factorial-representation possible.

Finally,
\(\mathbb{Q}_{01}\) is the set of ALL non-negative rational numbers \(0 \le{} \frac{p}{q} < 1\),
where \(p\) and \(q\) are co-prime. It is convenient to specify the co-prime condition
so that our \emph{description} of the contents uniquely identifies each member of the set.
Also, we want zero to be included so we toss it back into the set with the union operator.
We are not going to prove it here, but it is straightforward to show that \(\mathbb{Q}_{01}\) contains ALL the
rational numbers between zero and one, and we will take this as established.

Recall that two sets,
\(\mathcal{X}\) and \(\mathcal{Y}\)
are equal if and only if, for all \(a\),

{\normalsize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
a \in \mathcal{X} \Leftrightarrow a \in \mathcal{Y}.
\end{equation*}
\end{center}
\egroup
}

\break
\section*{Lemma 4}

{\normalsize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\mathbb{Q}_{01}
= \mathcal{S}
\end{equation*}
\end{center}
\egroup
}

\subsubsection*{Proof}

Lemma 3 tells us that the sets
\(\mathcal{F}_k\) and \(\mathcal{S}_k\) are equal, so clearly,
{\small
\begin{gather*}
\mathcal{F} = \bigcup\limits_{k=2}^{\infty} \mathcal{F}_k
= \bigcup\limits_{k=2}^{\infty} \mathcal{S}_k = \mathcal{S},
\end{gather*}
}
hence,
{\small
\begin{gather}
\mathcal{F} = \mathcal{S}. \label{eqn2}
\end{gather}
}

For all \(\frac{p}{k} \in \mathbb{Q}_{01}\) we have
\(\frac{p}{k} \in{} \mathcal{F}_k\) because,
{\small
\bgroup                                  %% open the group
%\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{equation*}
\frac{p}{k}
= \frac{2\cdot{}3\cdot{}\cdot{}\cdot{}(k-1)}{2\cdot{}3\cdot{}\cdot{}\cdot{}(k-1)} \cdot{} \frac{p}{k}
= \frac{2\cdot{}3\cdot{}\cdot{}\cdot{}(k-1)\cdot{}p}{k!},
\end{equation*}
\egroup
}
and because \(\mathcal{F}_k \subset \mathcal{F}\), then \(\frac{p}{k} \in \mathcal{F}\).

Conversely for all \(\frac{p}{k!} \in \mathcal{F}\), then \(\frac{p}{k!} \in \mathbb{Q}_{01}\) as follows,

Let \(m = \frac{p}{\gcd(p,k!)}\)
and \(n = \frac{k!}{\gcd(p,k!)}\).
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{equation*}
\frac{p}{k!} = \frac{p*\frac{1}{\gcd(p,k!)}}{k!*\frac{1}{\gcd(p,k!)}} = \frac{m}{n},
\end{equation*}
\egroup
}\newline
and since \(\gcd(m,n) = 1\) then \(\frac{m}{n} \in \mathbb{Q}_{01}\), that is; \(\frac{p}{k!} \in \mathbb{Q}_{01}\).

Therefore, for all \(a;\ a \in \mathcal{F} \Leftrightarrow a \in \mathbb{Q}_{01}\), which means,
\(\mathcal{F} = \mathbb{Q}_{01}\),
hence by the transitivity of equality, and equation \eqref{eqn2} above,

\begin{center}
\(\mathcal{S} = \mathbb{Q}_{01}\).
\end{center}

\hspace*{\fill}QED

\section*{Corollary to Lemma 4}

The factorial-representation for every rational number in \(\mathbb{Q}_{01}\) is \emph{unique}.

The corollary is a direct result of the fact that
the sets \(\mathcal{S}\) and \(\mathbb{Q}_{01}\) are equal.

That statement is sufficient to prove the corollary, so you can skip to
the actual proof of the ``Factorial Representation Theorem'' if you like, however
to shed a little more light on why this corollary is true, it's worth looking at a few details.

We first note that
\(\mathcal{F}_2
\subset \mathcal{F}_3
\subset \mathcal{F}_4
\subset \dots{}\) because,
for all \(\frac{p}{k!} \in \mathcal{F}_k\),
since \(\frac{p}{k!} = \frac{(k+1)\cdot{}p}{(k+1)\cdot{}k!} = \frac{(k+1)\cdot{}p}{(k+1)!}\),
and \(\frac{(k+1)\cdot{}p}{(k+1)!} \in \mathcal{F}_{k+1}\),
therefore \(\frac{p}{k!} \in \mathcal{F}_{k+1}\),
hence \(\mathcal{F}_k \subset \mathcal{F}_{k+1}\).

Similarly
\(\mathcal{S}_2
\subset \mathcal{S}_3
\subset \mathcal{S}_4
\subset \dots{}\), because
for all \(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!} \in \mathcal{S}_k\),
since\newline
\(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!} =
\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!}\!+\!\frac{0}{(k+1)!}\)
and
\(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!}\!+\!\frac{0}{(k+1)!}
\in \mathcal{S}_{k+1}\) then,\newline
\(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!}
\in \mathcal{S}_{k+1}\). Hence 
\(\mathcal{S}_k \subset \mathcal{S}_{k+1}\).

These infinite chains of super-sets helps us to think about the
meaning of our new sets
\(\mathcal{F}\) and \(\mathcal{S}\), each of which are defined as a union of 
an infinite sequence of \(\mathcal{F}_i\)'s and \(\mathcal{S}_i\)'s.

We can imagine that as
we build up either master-set by including each successive
\(\mathcal{F}_i\) or \(\mathcal{S}_i\), that either we're only adding
new elements to the ones that we've already gathered up, or we're simply tossing
the whole previous collection out, then using the entire contents of
the new largest set in its place. Either way of thinking about
building up our infinite union of sets is valid.

So once a particular rational number \(\frac{p}{q} \in \mathbb{Q}_{01}\)
finds it's way into one of the sets \(\mathcal{S}_i\) for some \(i\), then it will forever
be in all successive sets \(\mathcal{S}_n\) for \(n > i\), and it's factorial-representation is
unique within each of those successively larger sets.

\section*{Factorial Representation Theorem}

Any positive rational number can be expressed in one and only one way in the form

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
a_1 + \frac{a_2}{1\cdot{}2}
+ \frac{a_3}{1\cdot{}2\cdot{}3}
+ \dots{}
+ \frac{a_k}{1\cdot{}2\cdot{}3\cdot{}\dots{}\cdot{}k},
\end{equation*}
\end{center}
\egroup
}

where \(a_1, a_2, \dots{}, a_k\) are integers, and

{\small
\begin{center}
\(0\le{}a_1,\quad 0\le{}a_2<2,\quad 0\le{}a_3<3,\quad \dots{},\quad 0<a_k<k\)
\end{center}
}

\subsubsection*{Proof}

Thanks to Euclid we know that for all integers \(j\ge{}0\) and \(q>0\),
there exist \emph{unique} integers \(i\) and \(p\) such that,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group
\begin{alignat*}{3}
&&j = i\cdot{}q + p\ &;\quad 0\le{}p<q \\
&\Leftrightarrow\quad &\frac{j}{q} = i + \frac{p}{q}\ &;\quad 0\le{}\frac{p}{q}<1
\end{alignat*}
\egroup
}\par
Which tells us that \emph{all} positive rational numbers \(\frac{j}{q}\) can be
\emph{uniquely}
written as
an integer part, \(i\), plus a fractional part \(\frac{p}{q}\), where \(0\le{}\frac{p}{q}<1\).

Apply the Euclidean Division Theorem to \(\frac{j}{q}\) and let \(a_1 = i\). If there is no fractional remainder, then
the theorem has been proven.

When there is a non-zero fractional remainder \(\frac{p}{q}\), then 
by the Corollary to Lemma 4 we know that there is a
unique factorial-representation for \(\frac{p}{q}\).

So \(\frac{p}{q} = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_n}{n!} \in \mathcal{S}_n\), for some
\(n \ge{} 2\).
If we choose \(k\) such that \(a_k \ne{} 0 \) but \(a_{k+1} =
a_{k+2} =
a_{k+3} =
\dots{} =
a_{n-1} =
a_{n} = 0\) then we can satisfy the condition that the last term in the sum is non-zero, and hence:

\(a_1 + \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
is uniquely associated with the rational number \(\frac{j}{q}\).

\hspace*{\fill}QED

\break
\section*{Additional Observations}

We're guaranteed that \(\frac{p}{q} \in{} \mathcal{S}_q\), but \(\mathcal{S}_q\) is not necessarily 
the smallest such set for which \(\frac{p}{q}\) is a member.

For example,
the smallest set containing \(\frac{p}{5}\), where \(0 \le{} \frac{p}{5} < 1\), is \(\mathcal{S}_5\)
however
the smallest set containing \(\frac{p}{6}\), where \(0 \le{} \frac{p}{6} < 1\) is \(\mathcal{S}_3\),
which is easy to see when we list the contents of a couple of sets,
%  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19 20, 21, 22, 23
% 24, 24, ...
%  1   1   1   1   5   1   7   1   3   5  11   1  13   7   5   2  17   3  19  5   7  11  23
% 24  12   8   6  24   4  24   3   8  12  24   2  24  12   8   3  24   4  24  6   8  12  24

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{alignat*}{1}
\mathcal{S}_4 &= \{
\frac{ 0}{24},
\frac{ 1}{24},
\frac{ 2}{24},
\frac{ 3}{24},
\frac{ 4}{24},
\frac{ 5}{24},
\frac{ 6}{24},
\frac{ 7}{24},
\frac{ 8}{24},
\frac{ 9}{24},
\frac{10}{24},
\frac{11}{24},
\frac{12}{24},
\frac{13}{24},
\frac{14}{24},
\frac{15}{24},
\frac{16}{24},
\frac{17}{24},
\frac{18}{24},
\frac{19}{24},
\frac{20}{24},
\frac{21}{24},
\frac{22}{24},
\frac{23}{24}
\} \\
&= \{
\frac{ 0}{24},
\frac{ 1}{24},
\frac{ 1}{12},
\frac{ 1}{ 8},
\frac{ 1}{ 6},
\frac{ 5}{24},
\frac{ 1}{ 4},
\frac{ 7}{24},
\frac{ 1}{ 3},
\frac{ 3}{ 8},
\frac{ 5}{12},
\frac{11}{24},
\frac{ 1}{ 2},
\frac{13}{24},
\frac{ 7}{12},
\frac{ 5}{ 8},
\frac{ 2}{ 3},
\frac{17}{24},
\frac{ 3}{ 4},
\frac{19}{24},
\frac{ 5}{ 6},
\frac{ 7}{ 8},
\frac{11}{12},
\frac{23}{24}
\}
\end{alignat*}
\egroup
}

By examination \(\mathcal{S}_4\) doesn't contain \(\frac{1}{5}\), but it's
definitely in \(\mathcal{S}_5\) because,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{0}{2}
+ \frac{1}{2\cdot{}3}
+ \frac{0}{2\cdot{}3\cdot{}4}
+ \frac{4}{2\cdot{}3\cdot{}4\cdot{}5}
= \frac{1}{6} + \frac{1}{30}
= \frac{5 + 1}{30}
= \frac{6}{30}
= \frac{1}{5}
\end{equation*}
\end{center}
\egroup
}

Also, \(
\mathcal{S}_3
= \{
\frac{ 0}{6},
\frac{ 1}{6},
\frac{ 2}{6},
\frac{ 3}{6},
\frac{ 4}{6},
\frac{ 5}{6}
\}
\),
which demonstrates the claim that \(\mathcal{S}_3\)
contains \(\frac{p}{6}\),\newline where \(0 \le{} \frac{p}{6} < 1\).

I believe that for a given \(q \ge 2\) the smallest set \(\mathcal{S}_k\) for which \(\frac{p}{q}\)
is a member
will be found by choosing the smallest
\(k\) such that \(q\) divides \(k!\)\! .

However, I'll leave that examination for another day.

The number 
\(2\!+\!\frac{1}{2!}\!+\!\frac{1}{3!}\!+\!\frac{1}{4!}\!+\!\frac{1}{5!}\!+\!\dots{}\) can't
be a rational number, as its fractional-part is not in \(\mathcal{S}\)
because we can't point to any particular \(\mathcal{S}_k\) that the fractional-part would be a member of.
Not surprising really, since this number is the well known constant \(e\).
Is this a proof that \(e\) is irrational?

\end{document}
