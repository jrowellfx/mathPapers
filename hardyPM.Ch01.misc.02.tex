\documentclass{article}

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{letterpaper} % or letterpaper (US) or a5paper or....
\geometry{margin=1.35in} % for example, change the margins to 2 inches all round

\usepackage{graphicx} % support the \includegraphics command and options

\usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy/
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
%\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

% JPR added
\usepackage{fontawesome}
\usepackage{amsfonts}
%\usepackage{amsmath}
\usepackage{mathtools}% includes amsmath
\usepackage{changepage}
\usepackage{enumerate}
%\usepackage{setspace}
\usepackage{relsize}
\usepackage{wasysym}
%\usepackage{romannum}
 
\usepackage[pdftex,
            pdfauthor={James Philip Rowell},
            pdftitle={\jobname},
            pdfsubject={Proof of Chapter 1, Miscellaneous Examples, Number 2 from G.H. Hardy `A Course of Pure Mathematics'.},
            pdfkeywords={rational numbers, theorem, proof, mathematics, number theory, factorial, factoradic, Hardy, Examples, A Course of Pure Mathematics},
            pdfproducer={Latex},
            pdfcreator={miktex or pdflatex}]{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,      
    urlcolor=blue,
}
\usepackage{hyperxmp}
\hypersetup{
    pdfauthor={James Philip Rowell},
    pdfcopyright={Copyright  2018 by James Philip Rowell. All rights reserved.}
}
\usepackage{lipsum}

\newenvironment{jprIn}{\begin{adjustwidth}{2em}{}}{\end{adjustwidth}}
\addtolength{\skip\footins}{6pt}

\usepackage{alphalph}
\makeatletter
\newalphalph{\fnsymbolwrap}[wrap]{\@fnsymbol}{}
\makeatother
\renewcommand*{\thefootnote}{%
  \fnsymbolwrap{\value{footnote}}%
}

\usepackage{perpage}
\MakePerPage{footnote}

\DeclarePairedDelimiter\abs{\lvert}{\rvert}

%%% END Article customizations

\author{James Philip Rowell}
\title{\vspace{-1.5cm}Factorial Basis Representation of Rational Numbers}
\date{} % Activate to display a given date or no date (if empty), otherwise the current date is printed 
\begin{document}
\maketitle
\begin{em}
\centerline{\small{}From `A Course of Pure Mathematics' by G. H. Hardy. Chapter 1, Miscellaneous Examples.}
%\par
%\setlength{\parskip}{0pt}
\end{em}
%\normalsize
\bigskip

Miscellaneous example\footnote{Hardy doesn't call them `Exercises' or `Questions', but that's what they
are, math exercises for the student.} \#2 at the end
of chapter 1 in Hardy's `Pure Mathematics'
presents us with a fascinating result.
The theorem feels like what the `\href {https://www.dropbox.com/s/bwmrffmkcidnf27/basisReprThm.pdf?dl=0}
{basis-representation-theorem}'
is for integers, but for rational numbers \dots{} beautiful!

\section*{Factorial Representation Theorem\footnote{The theorem is not named in the text, so I named it.}}

Any positive rational number can be expressed in one and only one way in the form
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
a_1 + \frac{a_2}{1\cdot{}2}
+ \frac{a_3}{1\cdot{}2\cdot{}3}
+ \dots{}
+ \frac{a_k}{1\cdot{}2\cdot{}3\cdot{}\dots{}\cdot{}k},
\end{equation*}
\end{center}
\egroup
}

where \(a_1, a_2, \dots{}, a_k\) are integers, and

{\small
\begin{center}
\(0\le{}a_1,\quad 0\le{}a_2<2,\quad 0\le{}a_3<3,\quad \dots{},\quad 0<a_k<k\)
\end{center}
}

\section*{Observations that led to the proof.}

% The first thing to note are the ranges of the integers \(a_1, a_2, a_3, \dots{}, a_k\).

% The first one, \(a_1\), is just a plain-old non-negative integer.

The crux of the problem seemed to be showing that \emph{every} rational number has such a representation -
Proving uniqueness didn't seem as daunting. Here are some thoughts that pointed me in
a certain direction that led me to the proof below.

We know that any rational number\footnote{Every variable,
or constant (eg. \(a_1, a_k, m, n, i, p, q\)) in this
paper is going to represent a non-negative integer. We aren't dealing with `real numbers' here, just
non-negative rational numbers which we will always discuss in terms of one integer divided
by another integer, like \(\frac{p}{q}\).}, say \(\frac{m}{q}\), can be
% \emph{uniquely}
written as an
integer part, \(i\), plus a fractional part, \(\frac{p}{q}\), such that
\(\frac{m}{q} = i + \frac{p}{q}\), where \(0 \le{} \frac{p}{q} < 1\) (note that \(i\) can be zero).

So if we're trying to represent any positive
rational number \(\frac{m}{q}\) in the form of the theorem then the integer \(a_1\)
wants to play the role of the integer part, \(i\),
and the remainder of the expression \(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
looks to be playing the role of the rational part, \(\frac{p}{q}\), where,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
0 \le{} 
\frac{a_2}{2!}
+ \frac{a_3}{3!}
+ \dots{}
+ \frac{a_k}{k!}
< 1
\end{equation*}
\end{center}
\egroup
}

It seemed to me a good idea to forget about the integer \(a_1\)
and just focus on the integers \(a_2, a_3, \dots{}, a_k\).
In other words,
prove the theorem for rational numbers \(\frac{p}{q}\),
where \(0 \le{} \frac{p}{q} < 1\), then it should be trivial to extend it to ALL rational numbers
by tacking the \(a_1\) back on at the end of the proof.
Also, it started to become clear that including zero (that is, not JUST positive rational numbers) was
going to simplify the task\footnote{Did you notice how the theorem restricts the last integer, \(a_k\), to
be strictly greater than zero, unlike all the other variables? We loosen up that
restriction by allowing \(a_k\) to be equal to zero so that
all the variables are treated the same. At the very end of the
proof it's trivial to reintroduce that restriction on the integer \(a_k\).}.

At first, it wasn't remotely obvious to me how I'd go about calculating
the values of the integers \(a_2, a_3, \dots{}, a_k\) for a given rational number
\(\frac{p}{q}\)
(where
\(0 \le{} \frac{p}{q} < 1\))
let alone that it would be unique.

After playing around for a while, and finally figuring out
a way to calculate the variables \(a_2, a_3, \dots{}, a_k\)
for a given rational number,
% \(\frac{p}{q}\),
(it's kinda like doing long-division)
a few thing started to jump out at me.
For example, look at these numbers,

{\small
\bgroup
\setlength{\abovedisplayskip}{0pt}
\setlength{\belowdisplayskip}{0pt}
\begin{gather*}
\frac{1}{2}
= \frac{1}{1\cdot{}2}
= \frac{2!-1}{2!}\\
\frac{5}{6}
= \frac{1}{1\cdot{}2}
+ \frac{2}{1\cdot{}2\cdot{}3}
= \frac{1\cdot{}3}{1\cdot{}2\cdot{}3}
+ \frac{2}{1\cdot{}2\cdot{}3}
= \frac{3+2}{6}
= \frac{3!-1}{3!}\\
\frac{23}{24}
= \frac{1}{1\cdot{}2}
+ \frac{2}{1\cdot{}2\cdot{}3}
+ \frac{3}{1\cdot{}2\cdot{}3\cdot{}4}
= \frac{1\cdot{}3\cdot{}4}{1\cdot{}2\cdot{}3\cdot{}4}
+ \frac{2\cdot{}4}{1\cdot{}2\cdot{}3\cdot{}4}
+ \frac{3}{1\cdot{}2\cdot{}3\cdot{}4}
= \frac{12+8+3}{24}
= \frac{4!-1}{4!}
\end{gather*}
\egroup
}

An obvious pattern has emerged!
It seems to be the case
that if we assign the largest possible values to the variables,
from \(a_2\) up to \(a_k\) (with all subsequent variables being zero)
we get the rational number \(\frac{k!-1}{k!}\),
which is as close to 1 as you can get with a denominator of \(k!\) without actually
hitting 1. (What happens if you add \(\frac{1}{k!}\) to \(\frac{k!-1}{k!}\)?)
This turned out to be
a pretty useful observation, and it became my `Lemma 1' in the proof below.

Also, if we assign zeros to all the variables then naturally we get \(\frac{0}{k!}\), plus
it's pretty obvious to figure out how to make the smallest such non-zero rational number \(\frac{1}{k!}\).
Then thinking about continually adding \(\frac{1}{k!}\) to the result, we get an idea about how the
\(a_i\) variables change as you keep incrementing by \(\frac{1}{k!}\).

So if we restrict ourselves to using only \(a_2, a_3, \dots{}, a_k\), then we
can generate the smallest rational number (\(\frac{0}{k!}\)) and the largest
(\(\frac{k!-1}{k!}\)) where
\(0 \le{} \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!} < 1\).

One further observation to help understand the motivation
behind this proof is that by using combinatorics we can
count how many possible combinations of \(a_i\)'s there are.
So, we have two choices for the \(a_2\) variable (0, 1), combined with three choices for the \(a_3\) variable (0, 1, 2),
combined with four choices for the \(a_4\) variable (0, 1, 2, 3), \dots{} combined with \(k\) choices for
the \(a_k\) variable (0, 1, 2, \dots{}, \(k\!-\!1\)), which
gives us \(2\cdot{}3\cdot{}4\cdot{}\cdot{}\cdot{}k = k!\) possible different sums.

Hmmmmm, the following set has \(k!\) members,
\(\{\frac{0}{k!},\enspace \frac{1}{k!},\enspace \frac{2}{k!},\enspace \dots{},\enspace \frac{k!-1}{k!}\}\).
With a little algebraic tinkering we can see that
this set contains each of the rational numbers between zero and one with
denominators from 2 up to \(k\), so if we let \(k\) grow without bound
then we should get a set that contains all the rational numbers between zero and one.

So that, plus one or two other thoughts is what led me to the proof below. I won't spoil the rest of it;
to find out, go ahead and read the rest of the paper!

\section*{Lemma 1}
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-1}{k!} = \frac{k!-1}{k!},\quad \text{for all integers } k \ge{} 2
\end{equation*}
\end{center}
\egroup
}
\subsubsection*{Proof}

This equality is straightforward to demonstrate by induction, since \(\frac{1}{2!} = \frac{2!-1}{2!}\) and, 
{\scriptsize
\begin{alignat*}{1}
  &\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-2}{(k-1)!} + \frac{k-1}{k!}\\
  =\  &\frac{(k-1)!-1}{(k-1)!} + \frac{k-1}{k!}\\
  =\  &\frac{k((k-1)!-1)}{k(k-1)!} + \frac{k-1}{k!}\\
  =\  &\frac{k!-k+k-1}{k!}\\
  =\  &\frac{k!-1}{k!}
\end{alignat*}
}
\dots{}thus establishing Lemma 1 for all values of \(k \ge 2\).\qquad QED.

\bigskip
The following lemma captures an idea that is perhaps most easily grasped by analogy to the basis representation
theorem for integers. For base-ten numbers we can say,

\begin{center}
{\footnotesize\(1\cdot{}10^k >
9\cdot{}10^{k-1}
+ 9\cdot{}10^{k-2}
+ \dots{}
+ 9\cdot{}10^{2}
+ 9\cdot{}10^{1}
+ 9\cdot{}10^{0}
\)}
\end{center}

The above inequality 
is merely stating that any single power of ten is bigger than the sum of
every smaller power of ten, each times 9.  For example, 1000 is bigger than 999.
Read the statement of the inequality in Lemma 2 with this idea in mind.


\section*{Lemma 2}

For integers \(i,k\) where \(2\le{}i<k\),

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{i!} >
\frac{i}{(i+1)!}
+ \frac{i+1}{(i+2)!}
+ \dots{}
+ \frac{k-2}{(k-1)!}
+ \frac{k-1}{k!}
\end{equation*}
\end{center}
\egroup
}
\subsubsection*{Proof}
{\footnotesize
\bgroup
\setlength{\abovedisplayskip}{0pt}
\begin{align*}
  &\frac{i}{(i+1)!} + \frac{i+1}{(i+2)!} + \dots{} + \frac{k-2}{(k-1)!} + \frac{k-1}{k!}\\
  =\  &(\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-1}{k!})
  - (\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{i-1}{i!})\\
  =\  &\frac{k!-1}{k!} - \frac{i!-1}{i!}\qquad \qquad \text{(by Lemma 1)}\\
  =\  &\frac{k!}{k!} - \frac{1}{k!} - \frac{i!}{i!} + \frac{1}{i!}\\
  =\  &\frac{1}{i!} - \frac{1}{k!}\\
  <\  &\frac{1}{i!} \qquad \qquad \qquad \qquad \qquad \text{QED.}
\end{align*}
\egroup
}

\section*{Definitions}

For integer \(k \ge 2\), and integers \(a_2, a_3, \dots{}, a_k\), we define the following sets,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{gather*}
\mathcal{S}_k = \{\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\enspace\mid\enspace 
0\! \le{}\! a_2\! <\! 2,\enspace 
0\! \le{}\! a_3\! <\! 3,\enspace 
\dots{},\enspace 0\! \le{}\! a_k\! <\! k\},\\
\mathcal{F}_k = \{\frac{0}{k!},\enspace \frac{1}{k!},\enspace \frac{2}{k!},\enspace \dots{},\enspace \frac{k!-1}{k!}\}\\
\end{gather*}
\end{center}
\egroup
}

\section*{Lemma 3}

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\mathcal{S}_k = \mathcal{F}_k
\end{equation*}
\end{center}
\egroup
}

\subsubsection*{Proof}

To show
that the set \(\mathcal{S}_k\) is the same
as \(\mathcal{F}_k\), it suffices to show that if \(\frac{a}{b} \in \mathcal{S}_k\)
then
\(0\le{}\frac{a}{b}<1\) and \(\frac{a}{b} = \frac{p}{k!}\) for some \(p\),
and that the size of \(\mathcal{S}_k\) is the same as \(\mathcal{F}_k\).

It's clear that the set \(\mathcal{F}_k\) contains every rational number with denominator \(k!\)
where \(p\) is an integer and \mbox{\(0\le{}\frac{p}{k!}<1\)} and
that the size of \(\mathcal{F}_k\) is \(k!\, \).

The smallest member of the set \(\mathcal{S}_k\) 
is \(\frac{0}{k!}\) and
occurs when all the variables of the sum are set to zero.
Furthermore, the largest member of the set occurs when all the variables of the sum are set to
their maximum value, which gives us \(\frac{k!-1}{k!}\) as shown in Lemma 1.

We also note that every member of \(\mathcal{S}_k\) can be written as a rational number
with \(k!\) as the denominator, like so,

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_{k-1}}{(k-1)!} + \frac{a_k}{k!}
= \frac{k\cdot{}(k-1)\cdot{}\cdot{}\cdot{}3\cdot{}a_2}{k!}
+ \frac{k\cdot{}(k-1)\cdot{}\cdot{}\cdot{}4\cdot{}a_2}{k!}
+ \dots{}
+ \frac{k\cdot{}a_{k-1}}{k!}
+ \frac{a_k}{k!}
\end{equation*}
\end{center}
\egroup
}

Therefore any member of the set \(\mathcal{S}_k\) can be written as
\(\frac{p}{k!}\) for some integer \(p\), where

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
0 = \frac{0}{k!} \le{} \frac{p}{k!} \le{} \frac{k!-1}{k!} < \frac{k!}{k!} = 1,
\text{\quad hence,\quad}
0 \le{} \frac{p}{k!} < 1
\end{equation*}
\end{center}
\egroup
}

Furthermore, each possible assignment of values to the variables of
\(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
produces a \emph{unique} member of the set \(\mathcal{S}_k\).

For if this weren't true and both
\(\frac{p}{k!} = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\) and
\(\frac{p}{k!} = \frac{b_2}{2!} + \frac{b_3}{3!} + \dots{} + \frac{b_k}{k!}\)
for different variables \(a_2, a_3, \dots{}, a_k\)
and \(b_2, b_3, \dots{}, b_k\), then we can arrive at a contradiction as follows.

\break
First suppose that \(a_i\ne{}b_i\), where \(i \le{} k\), is the first such pair of variables
that differ. In other words,
\(a_2\!=\!b_2,\ a_3\!=\!b_3, \dots{},\ a_{i-1}\!=\!b_{i-1},\ a_i\!\ne{}\!b_i\).
Without loss of generality, further suppose that \(a_i > b_i\). Because
of the equality of the two different representations for \(\frac{p}{q}\) we can now write,

{\footnotesize
\bgroup
\setlength{\abovedisplayskip}{0pt}
\setlength{\belowdisplayskip}{0pt}
\begin{alignat}{3}
  &&\frac{a_i}{i!}
  + \frac{a_{i+1}}{(i+1)!}
  + \frac{a_{i+2}}{(i+2)!}
  + \dots{}
  % + \frac{a_{k-1}}{(k-1)!}
  + \frac{a_k}{k!}
  &= \frac{b_i}{i!}
  + \frac{b_{i+1}}{(i+1)!}
  + \frac{b_{i+2}}{(i+2)!}
  + \dots{}
  % + \frac{b_{k-1}}{(k-1)!}
  + \frac{b_k}{k!} \nonumber \\
  &\Leftrightarrow\quad &\frac{a_i - b_i}{i!}
  &= \frac{b_{i+1} - a_{i+1}}{(i+1)!}
  + \frac{b_{i+2} - a_{i+2}}{(i+2)!}
  + \dots{}
  % + \frac{b_{k-1} - a_{k-1}}{(k-1)!}
  + \frac{b_k - a_k}{k!} \label{eqn1}
\end{alignat}
\egroup
}%\vspace{-4mm}

But \(a_i - b_i \ge{} 1\), so

\begin{center}
\(\frac{a_i - b_i}{i!} \ge{} \frac{1}{i!}\).
\end{center}

In the case that \(i = k\) we get an immediate contradiction because 
equation \eqref{eqn1} tells us that \(\frac{a_i - b_i}{i!} = 0\) which is
clearly false.

So let's carry on assuming that \(i < k\) and examine
one of the terms
on the right-side of \eqref{eqn1}, say
the first one \(\frac{b_{i+1} - a_{i+1}}{(i+1)!}\). We can see that since
\(0 \le b_{i+1} \le{} i\) and \(0 \le a_{i+1} \le{} i\) that,

\begin{center}
\(\frac{i - 0}{(i+1)!} \ge{} \frac{b_{i+1} - a_{i+1}}{(i+1)!}\),
\end{center}

and hence by extension to the other terms,

\begin{center}
\(
\frac{i}{(i+1)!}
+ \frac{i+1}{(i+2)!}
+ \dots{} + \frac{k-1}{k!} \ge{}
\frac{b_{i+1} - a_{i+1}}{(i+1)!}
+ \frac{b_{i+2} - a_{i+2}}{(i+2)!}
+ \dots{} + \frac{b_k - a_k}{k!}\).
\end{center}

Furthermore, Lemma 2 tells us that \(\frac{1}{i!} > 
\frac{i}{(i+1)!}
+ \frac{i+1}{(i+2)!}
+ \dots{} + \frac{k-1}{k!}\), so
we can string all our inequalities together as follows,

\begin{center}
\(\frac{a_i - b_i}{i!} \ge{} \frac{1}{i!} > \frac{i}{(i+1)!} + \dots{} + \frac{k-1}{k!} \ge{} \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\),
\end{center}

and hence,

\begin{center}
\(\frac{a_i - b_i}{i!} > \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\),
\end{center}

But in equation \eqref{eqn1} we had deduced
that \(\frac{a_i - b_i}{i!} = \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\)
which contradicts the strict inequality above.

Therefore our assumption that there can be a second set
of variables representing the same rational number \(\frac{p}{k!}\) must be false.
Therefore any assignment of values to the variables of the sum
\(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
produces a \emph{unique} number in the set \(\mathcal{S}_k\).

Now we can count the number of members of \(\mathcal{S}_k\), by looking at all the
possible combinations of values for the variables \(a_2, a_3, \dots{}, a_k\).
There are 2 choices for the variable \(a_2\),
combined with 3 choices for \(a_3\),
combined with 4 choices for \(a_4\),
\dots{},
combined with \(k\) choices for \(a_k\).

Therefore the total number of combinations of values
that can be assigned to all the variables of
\(\frac{a_2}{2!}
+ \frac{a_3}{3!}
+ \frac{a_4}{4!}
+ \dots{} + \frac{a_k}{k!}\)
is \(2\cdot{}3\cdot{}4\cdot\cdot{}\cdot{}k = k!\,\). Since each set of assignments 
creates a \emph{unique} member of the set, then the size of the set \(\mathcal{S}_k\) is \(k!\)
which is also the size of the set \(\mathcal{F}_k\).
Recalling from above that any 
member of the set \(\mathcal{S}_k\), say \(\frac{a}{b}\),
can be written as \(\frac{a}{b} = \frac{p}{k!}\), for some \(p\) where 
\(0\le{}\frac{p}{k!}<1\) then
\(\mathcal{S}_k = \mathcal{F}_k\).

QED.

\section*{Corollary to Lemma 3}

Every non-negative rational number \(\frac{p}{k!}\), where \(k \ge{} 2\),
can be written as a sum using a \emph{unique} sequence of integers \(a_2, a_3, \dots{} a_k\) such that,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\frac{p}{k!} = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!},
\end{equation*}
\end{center}
\egroup
}

where \(0\! \le{}\! a_2\! <\! 2,\enspace 0\! \le{}\! a_3\! <\! 3,\enspace
\dots{},\enspace 0\! \le{}\! a_k\! <\! k\).

The corollary is a direct result of the fact that there is a one-to-one and onto mapping
between the sets
\(\mathcal{F}_k\) and
\(\mathcal{S}_k\).

\section*{Definitions}

{\small
\begin{gather*}
\mathcal{F} = \bigcup\limits_{k=2}^{\infty} \mathcal{F}_k \\
\mathcal{S} = \bigcup\limits_{k=2}^{\infty} \mathcal{S}_k \\
\mathbb{Q}_{01} = \{\frac{p}{q} \mid p, q \in \mathbb{Z},\text{ where } q \ge{} 2,\ 0 \le{} p < q,
\text{ and } \gcd(p,q) = 1\}
\end{gather*}
}

\(\mathcal{F}\) is the set of ALL non-negative rational numbers, less than one, with
all possible factorials as the denominator.

\(\mathcal{S}\) is the set of ALL non-negative rational numbers, less than one,
formed by every possible sum of the form we've been examining.

Finally,
\(\mathbb{Q}_{01}\) is just the set of ALL non-negative rational numbers less than one, 
where \(p\) and \(q\) are co-prime. We specify the co-prime condition
to get unique members of the set, otherwise the set isn't well defined (i.e.; by definition sets
must contain unique members). 

Recall that two sets, \(X\) and \(Y\) are equal if and only if, for all \(a\),

{\normalsize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
a \in X
% \mathbb{Q}_{01}
\Leftrightarrow
a \in Y.
% \mathcal{S}
\end{equation*}
\end{center}
\egroup
}

\section*{Lemma 4}

{\normalsize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\mathbb{Q}_{01}
= \mathcal{S}
\end{equation*}
\end{center}
\egroup
}

\break
\subsubsection*{Proof}

A useful observation to make about the sets \(\mathcal{F}_k\) and \(\mathcal{S}_k\) 
is that \(\mathcal{F}_2
\subset \mathcal{F}_3
\subset \mathcal{F}_4
\subset \dots{}\)
and
\(\mathcal{S}_2
\subset \mathcal{S}_3
\subset \mathcal{S}_4
\subset \dots{}\).

Lemma 3 tells us that \(\mathcal{F}_k = \mathcal{S}_k\),
so proving that 
\(\mathcal{F}_i\) is a proper subset of its successor \(\mathcal{F}_{i+1}, \forall i \ge{} 2\)
means that it must be true for \(\mathcal{S}_i, \forall i \ge{} 2\).
However it's interesting to see the specific
mechanisms that makes each sequence of supersets true without relying on Lemma 3.
% We'll start with \(\mathcal{F}_k\).

For all \(\frac{p}{k!} \in \mathcal{F}_k\),
since \(\frac{p}{k!} = \frac{(k+1)\cdot{}p}{(k+1)\cdot{}k!} = \frac{(k+1)\cdot{}p}{(k+1)!}\),
and \(\frac{(k+1)\cdot{}p}{(k+1)!} \in \mathcal{F}_{k+1}\),
therefore \(\frac{p}{k!} \in \mathcal{F}_{k+1}\),
hence \(\mathcal{F}_k \subset \mathcal{F}_{k+1}\).

Since each successive set's size grows larger, then by induction it is straightforward to conclude that
\(\mathcal{F}_2
\subset \mathcal{F}_3
\subset \mathcal{F}_4
\subset \dots{}
\), for all \(\mathcal{F}_i\), \(i \ge{} 2\).

Similarly for \(\mathcal{S}_k\);
For all \(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!} \in \mathcal{S}_k\),
since
\(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!} =
\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!}\!+\!\frac{0}{(k+1)!}\)
and
\(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!}\!+\!\frac{0}{(k+1)!}
\in \mathcal{S}_{k+1}\) then 
\(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!}
\in \mathcal{S}_{k+1}\). Hence 
\(\mathcal{S}_k \subset \mathcal{S}_{k+1}\).

Since each successive set's size grow larger, then
by induction it is straightforward to conclude that
\(\mathcal{S}_2
\subset \mathcal{S}_3
\subset \mathcal{S}_4
\subset \dots{}
\), for all \(\mathcal{S}_i\), \(i \ge{} 2\).

This infinite chain of supersets helps us to think about the
meaning of our new sets
\(\mathcal{F}\) and \(\mathcal{S}\), each of which are defined as a union of 
an infinite sequence of \(\mathcal{F}_i\)'s and \(\mathcal{S}_i\)'s.

We can imagine that as
we build up either master-set by including each successive
\(\mathcal{F}_i\) or \(\mathcal{S}_i\), that either we're only adding
new elements to the ones that we've already gathered up, or we're simply tossing
the whole previous collection out, then using the entire contents of
the new largest set in its place. Either way of thinking about the
master-set gives the same result.

I claim that for \(a \in \mathcal{S}\) that it's representation 
using a sequence of \(a_2, a_3, \dots{}, a_k, 0, 0, \dots{}\)'s is unique. We know that it's representation
is unique within any given set, for example say \(a \in \mathcal{S}_k\)

\break

We're going to prove the lemma through a series of equalities as follows:

{\normalsize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{alignat}{1}
\lim_{n \to \infty}\mathcal{F}_n &= \mathcal{F} \label{eqn2}\\
\mathcal{F} &= \mathbb{Q}_{01} \label{eqn3}\\
\lim_{n \to \infty}\mathcal{S}_n &= \mathcal{S} \label{eqn4}\\
\mathcal{S} &= \mathcal{F} \label{eqn5}
\end{alignat}
\end{center}
\egroup
}

By definition, \(\frac{p}{k!} \in \mathcal{F}\),
therefore, \(\frac{p}{k!} \in \mathcal{F} \Leftrightarrow \frac{p}{k!}
\in \mathcal{F}_n\), for all \(n \ge k\);
hence,
\begin{center}
\(\displaystyle{\mathcal{F} = \lim_{n \to \infty}\mathcal{F}_n}\).
\end{center}

\bigskip
\eqref{eqn3}:
If \(\frac{p}{k} \in \mathbb{Q}_{01}\)
then \(\frac{p}{k} \in{} \mathcal{F}_k\) because,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{equation*}
\frac{p}{k}
= \frac{2\cdot{}3\cdot{}\cdot{}\cdot{}(k-1)}{2\cdot{}3\cdot{}\cdot{}\cdot{}(k-1)} \cdot{} \frac{p}{k}
= \frac{2\cdot{}3\cdot{}\cdot{}\cdot{}(k-1)\cdot{}p}{k!},
\end{equation*}
\egroup
}

so by \eqref{eqn2} \(\frac{p}{k} \in \mathcal{F}\)
for all \(\frac{p}{k} \in \mathbb{Q}_{01}\). Clearly the converse is also
true, since if \(a \in \mathcal{F}\), then clearly \(a \in \mathbb{Q}_{01}\)
because \(\mathbb{Q}_{01}\) contains all non-negative rational numbers less than one;
hence,
\begin{center}
\(\mathcal{F} = \mathbb{Q}_{01}\).
\end{center}

\bigskip

\eqref{eqn4}:
For all \(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!} \in \mathcal{S}_k\),
since
\(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!} =
\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!}\!+\!\frac{0}{(k+1)!}\)
and
\(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!}\!+\!\frac{0}{(k+1)!}
\in \mathcal{S}_{k+1}\) then 
\(\frac{a_2}{2!}\!+\!\frac{a_3}{3!}\!+\!\dots{}\!+\!\frac{a_k}{k!}
\in \mathcal{S}_{k+1}\). Hence 
\(\mathcal{S}_k \subset \mathcal{S}_{k+1}\).

By induction it is straightforward to conclude that
\(\mathcal{S}_2
\subset \mathcal{S}_3
\subset \mathcal{S}_4
\subset \dots{}
\), for all \(\mathcal{S}_i\), \(i \ge{} 2\).
Therefore when
\(a \in \mathcal{S}_k\), then \(a \in \mathcal{S}_n, \forall\ n \ge{} k\).

Let \(a \in \mathcal{S}\), such that the smallest non-zero term in its sum
is \(\frac{a_k}{k!}\), then it's simple to see that \(a \in \mathcal{S}_k\),
therefore, \(a \in \mathcal{S} \Leftrightarrow a \in \mathcal{S}_n\), for all \(n \ge k\);
hence,
\begin{center}
\(\displaystyle{\mathcal{S} = \lim_{n \to \infty}\mathcal{S}_n}\).
\end{center}

\break
\eqref{eqn5}: Because of Lemma 3 we know that the sets
\(\mathcal{F}_k\) and \(\mathcal{S}_k\) are equal and interchangeable, so clearly
\(\displaystyle{\lim_{n \to \infty}\mathcal{F}_n = \lim_{n \to \infty}\mathcal{S}_n}\).

\bigskip
By the
equalities
\eqref{eqn2},
\eqref{eqn3},
\eqref{eqn4} and
\eqref{eqn5}
established above,
\(\displaystyle{\mathcal{S} = \lim_{n \to \infty}\mathcal{S}_n = \lim_{n \to \infty}\mathcal{F}_n
= \mathcal{F} = \mathbb{Q}_{01}}\), therefore,

\begin{center}
\(\mathcal{S} = \mathbb{Q}_{01}\).
\end{center}

QED.

\section*{Factorial Representation Theorem}

Any positive rational number can be expressed in one and only one way in the form

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
a_1 + \frac{a_2}{1\cdot{}2}
+ \frac{a_3}{1\cdot{}2\cdot{}3}
+ \dots{}
+ \frac{a_k}{1\cdot{}2\cdot{}3\cdot{}\dots{}\cdot{}k},
\end{equation*}
\end{center}
\egroup
}

where \(a_1, a_2, \dots{}, a_k\) are integers, and

{\small
\begin{center}
\(0\le{}a_1,\quad 0\le{}a_2<2,\quad 0\le{}a_3<3,\quad \dots{},\quad 0<a_k<k\)
\end{center}
}

\subsubsection*{Proof}

Thanks to Euclid we know that for all integers \(j\ge{}0\) and \(q>0\),
there exist \emph{unique} integers \(i\) and \(p\) such that,

{\normalsize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group
\begin{alignat*}{3}
&&j = i\cdot{}q + p\ &;\quad 0\le{}p<q \\
&\Leftrightarrow\quad &\frac{j}{q} = i + \frac{p}{q}\ &;\quad 0\le{}\frac{p}{q}<1
\end{alignat*}
\egroup
}\par
Which tells us that all positive rational numbers \(\frac{j}{q}\) can be
\emph{uniquely}
written as
an integer part, \(i\), plus a fractional part \(\frac{p}{q}\), where \(0\le{}\frac{p}{q}<1\).

% In our theorem, the \(a_1\) variable plays the role of the integer part \(i\),
% and the rest of the expression, \(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
% plays the role of the fractional part \(\frac{p}{q}\), where \(0\le{}\frac{p}{q}<1\).

Apply the Euclidean Division Theorem to \(\frac{j}{q}\) and let \(a_1 = i\). If there is no fractional remainder, then
the theorem has been proven.

When there is a non-zero fractional remainder \(\frac{p}{q}\), then 
by Lemma 4 we know that \(\frac{p}{q} \in \mathcal{S}\).

So \(\frac{p}{q} = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\), for some
\(k \ge{} 2\), and this sum is uniquely associated
with \(\frac{p}{q}\) (because \(\mathcal{S}\) and \(\mathbb{Q}_{01}\) are equal, and
all the elements of \(\mathbb{Q}_{01}\) are unique ((( ** BULLSHIT WARNING ** - need to go 
back, my defn for Q01 did not account for eg 1/2, 2/4, 3,6 etc all are mapped to 1/2! )))
therefore
\(\frac{j}{q} = a_1 + \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
is uniquely associated with all positive rational numbers \(\frac{j}{q}\).

QED.

\break
\section*{Additional Observations}

We're guaranteed that \(\frac{p}{q} \in{} \mathcal{S}_q\), but \(\mathcal{S}_q\) is not necessarily 
the smallest such set for which \(\frac{p}{q}\) is a member.

For example,
the smallest set containing \(\frac{p}{5}\), where \(0 \le{} \frac{p}{5} < 1\), is \(\mathcal{S}_5\)
however
the smallest set containing \(\frac{p}{6}\), where \(0 \le{} \frac{p}{6} < 1\) is \(\mathcal{S}_3\),
which is easy to see when we list the contents of a couple of sets,
%  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19 20, 21, 22, 23
% 24, 24, ...
%  1   1   1   1   5   1   7   1   3   5  11   1  13   7   5   2  17   3  19  5   7  11  23
% 24  12   8   6  24   4  24   3   8  12  24   2  24  12   8   3  24   4  24  6   8  12  24

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{alignat*}{1}
\mathcal{S}_4 &= \{
\frac{ 0}{24},
\frac{ 1}{24},
\frac{ 2}{24},
\frac{ 3}{24},
\frac{ 4}{24},
\frac{ 5}{24},
\frac{ 6}{24},
\frac{ 7}{24},
\frac{ 8}{24},
\frac{ 9}{24},
\frac{10}{24},
\frac{11}{24},
\frac{12}{24},
\frac{13}{24},
\frac{14}{24},
\frac{15}{24},
\frac{16}{24},
\frac{17}{24},
\frac{18}{24},
\frac{19}{24},
\frac{20}{24},
\frac{21}{24},
\frac{22}{24},
\frac{23}{24}
\} \\
&= \{
\frac{ 0}{24},
\frac{ 1}{24},
\frac{ 1}{12},
\frac{ 1}{ 8},
\frac{ 1}{ 6},
\frac{ 5}{24},
\frac{ 1}{ 4},
\frac{ 7}{24},
\frac{ 1}{ 3},
\frac{ 3}{ 8},
\frac{ 5}{12},
\frac{11}{24},
\frac{ 1}{ 2},
\frac{13}{24},
\frac{ 7}{12},
\frac{ 5}{ 8},
\frac{ 2}{ 3},
\frac{17}{24},
\frac{ 3}{ 4},
\frac{19}{24},
\frac{ 5}{ 6},
\frac{ 7}{ 8},
\frac{11}{12},
\frac{23}{24}
\}
\end{alignat*}
\egroup
}

By examination \(\mathcal{S}_4\) doesn't contain \(\frac{1}{5}\), but it's
definitely in \(\mathcal{S}_5\) because,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{5}
= \frac{0}{2}
+ \frac{1}{2\cdot{}3}
+ \frac{0}{2\cdot{}3\cdot{}4}
+ \frac{4}{2\cdot{}3\cdot{}4\cdot{}5}
= \frac{1}{6} + \frac{1}{30}
= \frac{5 + 1}{30}
= \frac{6}{30}
= \frac{1}{5}
\end{equation*}
\end{center}
\egroup
}

Also, \(
\mathcal{S}_3
= \{
\frac{ 0}{6},
\frac{ 1}{6},
\frac{ 2}{6},
\frac{ 3}{6},
\frac{ 4}{6},
\frac{ 5}{6}
\}
% = \{
% \frac{ 0}{6},
% \frac{ 1}{6},
% \frac{ 1}{3},
% \frac{ 1}{2},
% \frac{ 2}{3},
% \frac{ 5}{6}
% \}
\),
which demonstrates the claim that \(\mathcal{S}_3\)
contains \(\frac{p}{6}\),\newline where \(0 \le{} \frac{p}{6} < 1\).

I believe that for a given \(q \ge 2\) then the smallest set for which the rational number
\(\frac{p}{q} \in \mathcal{S}_k\),
is to pick
\(k\) such that it is the smallest value for which
\(q\) divides \(k!\)\! .

However, I'll leave that proof for another day.

\end{document}
