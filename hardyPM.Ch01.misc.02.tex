\documentclass{article}

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{letterpaper} % or letterpaper (US) or a5paper or....
\geometry{margin=1.35in} % for example, change the margins to 2 inches all round

\usepackage{graphicx} % support the \includegraphics command and options

\usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy/
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
%\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

% JPR added
\usepackage{fontawesome}
\usepackage{amsfonts}
%\usepackage{amsmath}
\usepackage{mathtools}% includes amsmath
\usepackage{changepage}
\usepackage{enumerate}
%\usepackage{setspace}
\usepackage{relsize}
\usepackage{wasysym}
%\usepackage{romannum}
 
\usepackage[pdftex,
            pdfauthor={James Philip Rowell},
            pdftitle={\jobname},
            pdfsubject={Proof of Chapter 1, Miscellaneous Examples, Number 2 from G.H. Hardy `A Course of Pure Mathematics'.},
            pdfkeywords={rational numbers, theorem, proof, mathematics, number theory, factorial, factoradic, Hardy, Examples, A Course of Pure Mathematics},
            pdfproducer={Latex},
            pdfcreator={miktex or pdflatex}]{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,      
    urlcolor=blue,
}
\usepackage{hyperxmp}
\hypersetup{
    pdfauthor={James Philip Rowell},
    pdfcopyright={Copyright  2018 by James Philip Rowell. All rights reserved.}
}
\usepackage{lipsum}

\newenvironment{jprIn}{\begin{adjustwidth}{2em}{}}{\end{adjustwidth}}
\addtolength{\skip\footins}{6pt}

\usepackage{alphalph}
\makeatletter
\newalphalph{\fnsymbolwrap}[wrap]{\@fnsymbol}{}
\makeatother
\renewcommand*{\thefootnote}{%
  \fnsymbolwrap{\value{footnote}}%
}

\usepackage{perpage}
\MakePerPage{footnote}

\DeclarePairedDelimiter\abs{\lvert}{\rvert}

%%% END Article customizations

\author{James Philip Rowell}
\title{\vspace{-1.5cm}Factoradic Representation of Rational Numbers}
\date{} % Activate to display a given date or no date (if empty), otherwise the current date is printed 
\begin{document}
\maketitle
\begin{em}
\centerline{\small{}From `A Course in Pure Mathematics' by G. H. Hardy. Chapter 1, Miscellaneous Examples.}
%\par
%\setlength{\parskip}{0pt}
\end{em}
%\normalsize
\bigskip

Miscellaneous example\footnote{Hardy doesn't call them `Exercises' or `Questions', but that's what they
are, math exercises like calculations to perform, theorems to prove etc.} \#2 at the end
of chapter 1 in Hardy's `Pure Mathematics'
presents us with a fascinating result (which was new to me).
It feels like
a kind of basis-representation-theorem, but for rational numbers, \dots{} beautiful!

Here it is, followed by my proof which starts out with some lemmas to get us rolling.

\section*{Theorem}

Any positive rational number can be expressed in one and only one way in the form
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
a_1 + \frac{a_2}{1\cdot{}2}
+ \frac{a_3}{1\cdot{}2\cdot{}3}
+ \dots{}
+ \frac{a_k}{1\cdot{}2\cdot{}3\cdot{}\dots{}\cdot{}k},
\end{equation*}
\end{center}
\egroup
}

where \(a_1, a_2, \dots{}, a_k\) are integers, and

\begin{center}
\(0\le{}a_1,\quad 0\le{}a_2<2,\quad 0\le{}a_3<3,\quad \dots{},\quad 0<a_k<k\)
\end{center}

\section*{Lemma-1}
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-1}{k!} = \frac{k!-1}{k!}
\end{equation*}
\end{center}
\egroup
}
\section*{Proof of Lemma-1}

This equality is fairly trivial to demonstrate by induction, since \(\frac{1}{2!} = \frac{2!-1}{2!}\) and, 
{\footnotesize
\begin{alignat*}{1}
  &\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-2}{(k-1)!} + \frac{k-1}{k!}\\
  =\  &\frac{(k-1)!-1}{(k-1)!} + \frac{k-1}{k!}\\
  =\  &\frac{k((k-1)!-1)}{k(k-1)!} + \frac{k-1}{k!}\\
  =\  &\frac{k!-k+k-1}{k!}\\
  =\  &\frac{k!-1}{k!}
\end{alignat*}
}
\dots{}thus establishing lemma-1 for all values of k. QED

\section*{Lemma-2}

For integers \(i,k\) where \(2\le{}i<k\) such that,
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{2!} + \frac{2}{3!}
+ \dots{}
+ \frac{i-1}{i!}
+ \frac{i}{(i+1)!}
+ \dots{}
+ \frac{k-1}{k!},
\end{equation*}
\end{center}
\egroup
}
then
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{i!} > \frac{i}{(i+1)!}
+ \dots{}
+ \frac{k-1}{k!}
\end{equation*}
\end{center}
\egroup
}
\section*{Proof of Lemma-2}
{\small
\bgroup
\setlength{\abovedisplayskip}{0pt}
\setlength{\belowdisplayskip}{0pt}
\begin{alignat*}{1}
  &\frac{i}{(i+1)!} + \dots{} + \frac{k-1}{k!}\\
  =\  &(\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-1}{k!})
  - (\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{i-1}{i!})\\
  =\  &\frac{k!-1}{k!} - \frac{i!-1}{i!}\\
  =\  &\frac{k!}{k!} - \frac{1}{k!} - \frac{i!}{i!} + \frac{1}{i!}\\
  =\  &\frac{1}{i!} - \frac{1}{k!}\\
  <\  &\frac{1}{i!}
\end{alignat*}
\egroup
}
%}\vspace{-4mm}
\begin{center}
QED
\end{center}
\section*{Lemma-3}

The set of rational numbers,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\mathcal{S}(k) = \{\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\enspace\mid\enspace 
0\! \le{}\! a_2\! <\! 2,\enspace 
0\! \le{}\! a_3\! <\! 3,\enspace 
\dots{},\enspace 0\! \le{}\! a_k\! <\! k\}
\end{equation*}
\end{center}
\egroup
}

is identical to the set of rational numbers,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\mathcal{F}(k) = \{\frac{0}{k!},\enspace \frac{1}{k!},\enspace \frac{2}{k!},\enspace \dots{},\enspace \frac{k!-1}{k!}\}
\end{equation*}
\end{center}
\egroup
}

\section*{Proof of Lemma-3}

It's clear that the set \(\mathcal{F}(k)\) contains every rational number with denominator \(k!\)
where \mbox{\(0\le{}\frac{p}{k!}<1\)} and also clear that the size of \(\mathcal{F}(k)\) is \(k!\, \). To show
that the set \(\mathcal{S}(k)\) is the same
as \(\mathcal{F}(k)\), it suffices to show that every member of \(\mathcal{S}(k)\)
is also of the form \(0\le{}\frac{p}{k!}<1\), and that the size of \(\mathcal{S}(k)\) is also \(k!\, \).

The smallest member of the set \(\mathcal{S}(k)\) 
is \(\frac{0}{k!}\) and
occurs when all the coefficients of the sum are zero.
Furthermore, the largest member of the set occurs when all the coefficients of the sum are set to
their maximum value, which gives us \(\frac{k!-1}{k!}\) as shown in lemma-1.

We also note that every member of \(\mathcal{S}(k)\) can be written as a rational number
with \(k!\) as the denominator, like so,

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_{k-1}}{(k-1)!} + \frac{a_k}{k!}
= \frac{k\cdot{}(k-1)\cdot{}\cdot{}\cdot{}3\cdot{}a_2}{k!}
+ \frac{k\cdot{}(k-1)\cdot{}\cdot{}\cdot{}4\cdot{}a_2}{k!}
+ \dots{}
+ \frac{k\cdot{}a_{k-1}}{k!}
+ \frac{a_k}{k!}
\end{equation*}
\end{center}
\egroup
}

Therefor any member of the set \(\mathcal{S}(k)\) is of the form \(0\le{}\frac{p}{k!}<1\),
where \(p\) in an integer in the range \(0\le{}p\le{}k!-1\).

Furthermore, each possible assignment of values to the coefficients of
\(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
produce a unique member of the set \(\mathcal{S}(k)\).

For this weren't true and both
\(\frac{p}{k!} = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\) and
\(\frac{p}{k!} = \frac{b_2}{2!} + \frac{b_3}{3!} + \dots{} + \frac{b_k}{k!}\)
for different coefficients \(a_2, a_3, \dots{}, a_k\)
and \(b_2, b_3, \dots{}, b_k\), then we can arrive at a contradiction as follows.

First suppose that \(a_i\ne{}b_i\) is the first such pair of coefficients
that differ from each other. In other words, \(a_2=b_2, a_3=b_3, \dots{}, a_{i-1}=b_{i-1}\).
Also, without loss of generality we can assume that \(a_i > b_i\) and state the following equality:

{\normalsize
\bgroup
\setlength{\abovedisplayskip}{0pt}
\setlength{\belowdisplayskip}{0pt}
\begin{alignat*}{3}
  &&\frac{a_i}{i!} + \frac{a_{i+1}}{(i+1)!} + \dots{} + \frac{a_k}{k!}
  &= \frac{b_i}{i!} + \frac{b_{i+1}}{(i+1)!} + \dots{} + \frac{b_k}{k!}\\
  &\Leftrightarrow\quad &\frac{a_i - b_i}{i!}
  &= \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}
\end{alignat*}
\egroup
}%\vspace{-4mm}

Since \(a_i - b_i \ge{} 1\), then \(\frac{a_i - b_i}{i!} \ge{} \frac{1}{i!}\).

Also,
\(\frac{i}{(i+1)!} + \dots{} + \frac{k-1}{k!} \ge{} \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\)
regardless of the values of the coefficients
on the right side of the inequality\footnote{Letting all the \(b\)'s be their maximum value,
and all the \(a\)'s be zero will produce the largest numerators in each term of the sum, any other possibility will result in a smaller term for the sum.}.

However, lemma-2 tells us,\par
\begin{center}
\(\frac{a_i - b_i}{i!} \ge{} \frac{1}{i!} > \frac{i}{(i+1)!} + \dots{} + \frac{k-1}{k!} \ge{} \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\),
\end{center}\par
demonstrating that equality two expressions at either end of the inequality
is impossible, so our assumption that there can be a second set
of coefficients to produce the same rational number \(\frac{p}{k!}\) is false.
Therefor any assignment of values to the coefficients of
\(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
produces a unique member of the set \(\mathcal{S}(k)\).

Now we can count the number of members of the set \(\mathcal{S}(k)\), by looking at all the
possible combinations of values for the coefficients \(a_2, a_3, \dots{}, a_k\).
There are 2 choices for the coefficient \(a_2\),
multiplied by the 3 choices for \(a_3\),
multiplied by the 4 choices for \(a_4\),
\dots{},
up to multiplying by \(k\) values that \(a_k\) can assume.

Therefore the total number of combinations of values
that can be assigned to all the coefficients of \(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
is \(2\cdot{}3\cdot{}4\cdot\cdot{}\cdot{}k = k!\,\),
which means the size of the set \(\mathcal{S}(k)\) is \(k!\, \). This plus our conclusion above that
all members of the set \(\mathcal{S}(k)\) are of the form \(0\le{}\frac{p}{k!}<1\)
means that
\(\mathcal{S}(k) = \mathcal{F}(k)\).\qquad QED

\section*{Lemma-4}

All rational numbers \(\frac{p}{q}\) such that \(0\le{}p<q\) and \(2\le{}q\le{k}\)\footnote{That list
of rational numbers 
would look like this,
\(
\frac{0}{2},
\frac{1}{2},
\frac{0}{3},
\frac{1}{3},
\frac{2}{3},
\frac{0}{4},
\frac{1}{4},
\frac{2}{4},
\frac{3}{4},
\frac{0}{5},
\frac{1}{5},
\frac{2}{5},
\frac{3}{5},
\frac{4}{5},
\dots{},
\frac{0}{k},
\frac{1}{k},
\frac{2}{k},
\dots{},
\frac{k-2}{k},
\frac{k-1}{k}\).} are members of the set \(\mathcal{S}(k)\).

\section*{Proof of Lemma-4}
Since \(0\le{}p<q\) then \(0\le{}\frac{p}{q}<1\) and
{\normalsize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{alignat*}{1}
\frac{p}{q}\quad =\quad &\frac
{2\cdot{}3\cdot{}\cdot{}\cdot{}(q-1)\cdot{}(q+1)\cdot{}\cdot{}\cdot{}k}
{2\cdot{}3\cdot{}\cdot{}\cdot{}(q-1)\cdot{}(q+1)\cdot{}\cdot{}\cdot{}k} \cdot{} \frac{p}{q}\\
=\quad &\frac
{2\cdot{}3\cdot{}\cdot{}\cdot{}(q-1)\cdot{}p\cdot{}(q+1)\cdot{}\cdot{}\cdot{}k}
{2\cdot{}3\cdot{}\cdot{}\cdot{}(q-1)\cdot{}q\cdot{}(q+1)\cdot{}\cdot{}\cdot{}k}\\
=\quad &\frac
{2\cdot{}3\cdot{}\cdot{}\cdot{}(q-1)\cdot{}p\cdot{}(q+1)\cdot{}\cdot{}\cdot{}k}
{k!}
\end{alignat*}
\end{center}
\egroup
Therefor \(\frac{p}{q}\) is an element of \(\mathcal{F}(k)\) which is the same as the set \(\mathcal{S}(k)\).\par
QED
}

\end{document}
