\documentclass{article}

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{letterpaper} % or letterpaper (US) or a5paper or....
\geometry{margin=1.35in} % for example, change the margins to 2 inches all round

\usepackage{graphicx} % support the \includegraphics command and options

\usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy/
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
%\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

% JPR added
\usepackage{fontawesome}
\usepackage{amsfonts}
%\usepackage{amsmath}
\usepackage{mathtools}% includes amsmath
\usepackage{changepage}
\usepackage{enumerate}
%\usepackage{setspace}
\usepackage{relsize}
\usepackage{wasysym}
%\usepackage{romannum}
 
\usepackage[pdftex,
            pdfauthor={James Philip Rowell},
            pdftitle={\jobname},
            pdfsubject={Proof of Chapter 1, Miscellaneous Examples, Number 2 from G.H. Hardy `A Course of Pure Mathematics'.},
            pdfkeywords={rational numbers, theorem, proof, mathematics, number theory, factorial, factoradic, Hardy, Examples, A Course of Pure Mathematics},
            pdfproducer={Latex},
            pdfcreator={miktex or pdflatex}]{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,      
    urlcolor=blue,
}
\usepackage{hyperxmp}
\hypersetup{
    pdfauthor={James Philip Rowell},
    pdfcopyright={Copyright  2018 by James Philip Rowell. All rights reserved.}
}
\usepackage{lipsum}

\newenvironment{jprIn}{\begin{adjustwidth}{2em}{}}{\end{adjustwidth}}
\addtolength{\skip\footins}{6pt}

\usepackage{alphalph}
\makeatletter
\newalphalph{\fnsymbolwrap}[wrap]{\@fnsymbol}{}
\makeatother
\renewcommand*{\thefootnote}{%
  \fnsymbolwrap{\value{footnote}}%
}

\usepackage{perpage}
\MakePerPage{footnote}

\DeclarePairedDelimiter\abs{\lvert}{\rvert}

%%% END Article customizations

\author{James Philip Rowell}
\title{\vspace{-1.5cm}Factorial Basis Representation of Rational Numbers}
\date{} % Activate to display a given date or no date (if empty), otherwise the current date is printed 
\begin{document}
\maketitle
\begin{em}
\centerline{\small{}From `A Course of Pure Mathematics' by G. H. Hardy. Chapter 1, Miscellaneous Examples.}
%\par
%\setlength{\parskip}{0pt}
\end{em}
%\normalsize
\bigskip

Miscellaneous example\footnote{Hardy doesn't call them `Exercises' or `Questions', but that's what they
are, math exercises for the student.} \#2 at the end
of chapter 1 in Hardy's `Pure Mathematics'
presents us with a fascinating result.
The theorem feels like what the `\href {https://www.dropbox.com/s/bwmrffmkcidnf27/basisReprThm.pdf?dl=0}
{basis-representation-theorem}'
is for integers, but for rational numbers \dots{} beautiful!

\section*{Factorial Representation Theorem\footnote{The theorem is not named in the text, so I named it.}}

Any positive rational number can be expressed in one and only one way in the form
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
a_1 + \frac{a_2}{1\cdot{}2}
+ \frac{a_3}{1\cdot{}2\cdot{}3}
+ \dots{}
+ \frac{a_k}{1\cdot{}2\cdot{}3\cdot{}\dots{}\cdot{}k},
\end{equation*}
\end{center}
\egroup
}

where \(a_1, a_2, \dots{}, a_k\) are integers, and

{\small
\begin{center}
\(0\le{}a_1,\quad 0\le{}a_2<2,\quad 0\le{}a_3<3,\quad \dots{},\quad 0<a_k<k\)
\end{center}
}

\section*{Observations that led to the proof.}

% The first thing to note are the ranges of the integers \(a_1, a_2, a_3, \dots{}, a_k\).

% The first one, \(a_1\), is just a plain-old non-negative integer.

The crux of the problem seems to be showing that every rational number has such a representation.
Proving the uniqueness part doesn't seem as daunting. Here are some thoughts that pointed me in
a certain direction that led me to the proof below.

We know that any rational number\footnote{Every variable,
or constant (eg. \(a_1, a_k, m, n, i, p, q\)) in this
paper is going to represent a non-negative integer. We aren't dealing with `real numbers' here, just
non-negative rational numbers which we will always discuss in terms of one integer divided
by another integer, like \(\frac{p}{q}\).}, say \(\frac{m}{q}\), can be written as an
integer part, \(i\), PLUS a fractional part, \(\frac{p}{q}\), such that
\(\frac{m}{q} = i + \frac{p}{q}\), where \(0 \le{} \frac{p}{q} < 1\) (note that \(i\) can be zero).

So if we're trying to represent any positive
rational number \(\frac{m}{q}\) in the form of the theorem then the integer \(a_1\)
wants to play the role of the integer part, \(i\),
and the remainder of the expression \(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
looks to be playing the role of the rational part, \(\frac{p}{q}\), where,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
0 \le{} 
\frac{a_2}{2!}
+ \frac{a_3}{3!}
+ \dots{}
+ \frac{a_k}{k!}
< 1
\end{equation*}
\end{center}
\egroup
}

It seemed to me a good idea to forget about the integer \(a_1\)
and just focus on the integers \(a_2, a_3, \dots{}, a_k\).
In other words,
prove the theorem for rational numbers \(\frac{p}{q}\),
where \(0 \le{} \frac{p}{q} < 1\), then it should be trivial to extend it to ALL rational numbers
by tacking the \(a_1\) back on at the end of the proof.
Also, it started to become clear that including zero (that is, not JUST positive rational numbers) was
going to simplify the task\footnote{Did you notice how the theorem restricts the last integer, \(a_k\), to
be strictly greater than zero, unlike all the other variables? We loosen up that
restriction by allowing \(a_k\) to be equal to zero so that
all the variables are treated the same. At the very end of the
proof it's trivial to reintroduce that restriction on the integer \(a_k\).}.

At first, it wasn't remotely obvious to me how I'd go about calculating
the values of the integers \(a_2, a_3, \dots{}, a_k\) for a given rational number
\(\frac{p}{q}\)
(where
\(0 \le{} \frac{p}{q} < 1\))
let alone that it would be unique.

After playing around for a while, and finally figuring out
a way to calculate the variables \(a_2, a_3, \dots{}, a_k\)
for a given rational number,
% \(\frac{p}{q}\),
(it's kinda like doing long-division)
a few thing started to jump out at me.
For example, look at these numbers,

{\small
\bgroup
\setlength{\abovedisplayskip}{0pt}
\setlength{\belowdisplayskip}{0pt}
\begin{gather*}
\frac{1}{2}
= \frac{1}{1\cdot{}2}
= \frac{2!-1}{2!}\\
\frac{5}{6}
= \frac{1}{1\cdot{}2}
+ \frac{2}{1\cdot{}2\cdot{}3}
= \frac{1\cdot{}3}{1\cdot{}2\cdot{}3}
+ \frac{2}{1\cdot{}2\cdot{}3}
= \frac{3+2}{6}
= \frac{3!-1}{3!}\\
\frac{23}{24}
= \frac{1}{1\cdot{}2}
+ \frac{2}{1\cdot{}2\cdot{}3}
+ \frac{3}{1\cdot{}2\cdot{}3\cdot{}4}
= \frac{1\cdot{}3\cdot{}4}{1\cdot{}2\cdot{}3\cdot{}4}
+ \frac{2\cdot{}4}{1\cdot{}2\cdot{}3\cdot{}4}
+ \frac{3}{1\cdot{}2\cdot{}3\cdot{}4}
= \frac{12+8+3}{24}
= \frac{4!-1}{4!}
\end{gather*}
\egroup
}

An obvious pattern has emerged!
It seems to be the case
that if we assign the largest possible values to the variables,
from \(a_2\) up to say \(a_k\) (with all subsequent variables being zero)
we get the rational number \(\frac{k!-1}{k!}\),
which is as close to 1 as you can get with a denominator of \(k!\) without actually
hitting 1. (What happens if you add \(\frac{1}{k!}\) to \(\frac{k!-1}{k!}\)?)
This turned out to be
a pretty useful observation, and it became my `Lemma 1' in the proof below.

Also, if we assign zeros to all the variables then naturally we get \(\frac{0}{k!}\), plus
it's pretty simple to figure out how to make the smallest non-zero such rational number \(\frac{1}{k!}\).
Then thinking about continually adding \(\frac{1}{k!}\) to the result gives us an idea about how the
\(a_i\) variables change as you keep incrementing by \(\frac{1}{k!}\).

So if we restrict ourselves to using only \(a_2, a_3, \dots{}, a_k\), then we
can generate the smallest rational number (\(\frac{0}{k!}\)) and the largest
(\(\frac{k!-1}{k!}\)) where
\(0 \le{} \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!} < 1\).

One further observation to help understand the motivation
behind this proof is that by using combinatorics we can
count how many possible combinations of \(a_i\)'s are possible.
So, we have two choices for the \(a_2\) variable (0, 1), combined with three choices for the \(a_3\) variable (0, 1, 2),
combined with four choices for the \(a_4\) variable (0, 1, 2, 3), \dots{} combined with \(k\) choices for
the \(a_k\) variable (0, 1, 2, \dots{}, \(k\!-\!1\)), which
gives us \(2\cdot{}3\cdot{}4\cdot{}\cdot{}\cdot{}k = k!\) possible different sums.

Hmmmmm, the following set has \(k!\) members,
\(\{\frac{0}{k!},\enspace \frac{1}{k!},\enspace \frac{2}{k!},\enspace \dots{},\enspace \frac{k!-1}{k!}\}\).
With a little algebraic tinkering we can see that
this set contains each of the rational numbers between zero and one with
denominators from 2 up to \(k\), so if we let \(k\) grow without bound
then we should get a set that contains all the rational numbers between zero and one.

So that, plus one or two other thoughts is what led me to the proof below. I won't spoil the rest of it;
to find out, go ahead and read the rest of the paper!

\section*{Lemma 1}
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-1}{k!} = \frac{k!-1}{k!},\quad \text{for all integers } k \ge{} 2
\end{equation*}
\end{center}
\egroup
}
\subsubsection*{Proof}

This equality is straightforward to demonstrate by induction, since \(\frac{1}{2!} = \frac{2!-1}{2!}\) and, 
{\scriptsize
\begin{alignat*}{1}
  &\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-2}{(k-1)!} + \frac{k-1}{k!}\\
  =\  &\frac{(k-1)!-1}{(k-1)!} + \frac{k-1}{k!}\\
  =\  &\frac{k((k-1)!-1)}{k(k-1)!} + \frac{k-1}{k!}\\
  =\  &\frac{k!-k+k-1}{k!}\\
  =\  &\frac{k!-1}{k!}
\end{alignat*}
}
\dots{}thus establishing Lemma 1 for all values of \(k \ge 2\).\qquad QED.

\bigskip
The following lemma captures an idea that is perhaps most easily grasped by analogy to the basis representation
theorem for integers. For base-ten numbers we can say,

\begin{center}
{\footnotesize\(1\cdot{}10^k >
9\cdot{}10^{k-1}
+ 9\cdot{}10^{k-2}
+ \dots{}
+ 9\cdot{}10^{2}
+ 9\cdot{}10^{1}
+ 9\cdot{}10^{0}
\)}
\end{center}

The above inequality 
is merely stating that any single power of ten is bigger than the sum of
every smaller power of ten, each times 9.  For example, 1000 is bigger than 999.
Read the statement of the inequality in Lemma 2 with this idea in mind.


\section*{Lemma 2}

For integers \(i,k\) where \(2\le{}i<k\),

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{i!} >
\frac{i}{(i+1)!}
+ \frac{i+1}{(i+2)!}
+ \dots{}
+ \frac{k-2}{(k-1)!}
+ \frac{k-1}{k!}
\end{equation*}
\end{center}
\egroup
}
\subsubsection*{Proof}
{\footnotesize
\bgroup
\setlength{\abovedisplayskip}{0pt}
\begin{align*}
  &\frac{i}{(i+1)!} + \frac{i+1}{(i+2)!} + \dots{} + \frac{k-2}{(k-1)!} + \frac{k-1}{k!}\\
  =\  &(\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{k-1}{k!})
  - (\frac{1}{2!} + \frac{2}{3!} + \dots{} + \frac{i-1}{i!})\\
  =\  &\frac{k!-1}{k!} - \frac{i!-1}{i!}\qquad \qquad \text{(by Lemma 1)}\\
  =\  &\frac{k!}{k!} - \frac{1}{k!} - \frac{i!}{i!} + \frac{1}{i!}\\
  =\  &\frac{1}{i!} - \frac{1}{k!}\\
  <\  &\frac{1}{i!} \qquad \qquad \qquad \qquad \qquad \text{QED.}
\end{align*}
\egroup
}

\section*{Definitions}

For integer \(k \ge 2\), and integers \(a_2, a_3, \dots{}, a_k\), we define the following sets,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{gather*}
\mathcal{S}_k = \{\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\enspace\mid\enspace 
0\! \le{}\! a_2\! <\! 2,\enspace 
0\! \le{}\! a_3\! <\! 3,\enspace 
\dots{},\enspace 0\! \le{}\! a_k\! <\! k\},\\
\mathcal{F}_k = \{\frac{0}{k!},\enspace \frac{1}{k!},\enspace \frac{2}{k!},\enspace \dots{},\enspace \frac{k!-1}{k!}\}\\
\end{gather*}
\end{center}
\egroup
}

\section*{Lemma 3}

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\mathcal{S}_k = \mathcal{F}_k
\end{equation*}
\end{center}
\egroup
}

\subsubsection*{Proof}

To show
that the set \(\mathcal{S}_k\) is the same
as \(\mathcal{F}_k\), it suffices to show that if \(\frac{a}{b} \in \mathcal{S}_k\)
then
\(0\le{}\frac{a}{b}<1\) and \(\frac{a}{b} = \frac{p}{k!}\) for some \(p\),
and that the size of \(\mathcal{S}_k\) is the same as \(\mathcal{F}_k\).

It's clear that the set \(\mathcal{F}_k\) contains every rational number with denominator \(k!\)
where \(p\) is an integer and \mbox{\(0\le{}\frac{p}{k!}<1\)} and
that the size of \(\mathcal{F}_k\) is \(k!\, \).

The smallest member of the set \(\mathcal{S}_k\) 
is \(\frac{0}{k!}\) and
occurs when all the variables of the sum are set to zero.
Furthermore, the largest member of the set occurs when all the variables of the sum are set to
their maximum value, which gives us \(\frac{k!-1}{k!}\) as shown in Lemma 1.

We also note that every member of \(\mathcal{S}_k\) can be written as a rational number
with \(k!\) as the denominator, like so,

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_{k-1}}{(k-1)!} + \frac{a_k}{k!}
= \frac{k\cdot{}(k-1)\cdot{}\cdot{}\cdot{}3\cdot{}a_2}{k!}
+ \frac{k\cdot{}(k-1)\cdot{}\cdot{}\cdot{}4\cdot{}a_2}{k!}
+ \dots{}
+ \frac{k\cdot{}a_{k-1}}{k!}
+ \frac{a_k}{k!}
\end{equation*}
\end{center}
\egroup
}

Therefore any member of the set \(\mathcal{S}_k\) can be written as
\(\frac{p}{k!}\) for some integer \(p\), where

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{equation*}
0 = \frac{0}{k!} \le{} \frac{p}{k!} \le{} \frac{k!-1}{k!} < \frac{k!}{k!} = 1,
\text{\quad hence,\quad}
0 \le{} \frac{p}{k!} < 1
\end{equation*}
\end{center}
\egroup
}

Furthermore, each possible assignment of values to the variables of
\(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
produces a \emph{unique} member of the set \(\mathcal{S}_k\).

For if this weren't true and both
\(\frac{p}{k!} = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\) and
\(\frac{p}{k!} = \frac{b_2}{2!} + \frac{b_3}{3!} + \dots{} + \frac{b_k}{k!}\)
for different variables \(a_2, a_3, \dots{}, a_k\)
and \(b_2, b_3, \dots{}, b_k\), then we can arrive at a contradiction as follows.

\break
First suppose that \(a_i\ne{}b_i\), where \(i \le{} k\), is the first such pair of variables
that differ. In other words,
\(a_2\!=\!b_2,\ a_3\!=\!b_3, \dots{},\ a_{i-1}\!=\!b_{i-1},\ a_i\!\ne{}\!b_i\).
Without loss of generality, further suppose that \(a_i > b_i\). Because
of the equality of the two different representations for \(\frac{p}{q}\) we can now write,

{\footnotesize
\bgroup
\setlength{\abovedisplayskip}{0pt}
\setlength{\belowdisplayskip}{0pt}
\begin{alignat}{3}
  &&\frac{a_i}{i!}
  + \frac{a_{i+1}}{(i+1)!}
  + \frac{a_{i+2}}{(i+2)!}
  + \dots{}
  % + \frac{a_{k-1}}{(k-1)!}
  + \frac{a_k}{k!}
  &= \frac{b_i}{i!}
  + \frac{b_{i+1}}{(i+1)!}
  + \frac{b_{i+2}}{(i+2)!}
  + \dots{}
  % + \frac{b_{k-1}}{(k-1)!}
  + \frac{b_k}{k!} \nonumber \\
  &\Leftrightarrow\quad &\frac{a_i - b_i}{i!}
  &= \frac{b_{i+1} - a_{i+1}}{(i+1)!}
  + \frac{b_{i+2} - a_{i+2}}{(i+2)!}
  + \dots{}
  % + \frac{b_{k-1} - a_{k-1}}{(k-1)!}
  + \frac{b_k - a_k}{k!} \label{eqn1}
\end{alignat}
\egroup
}%\vspace{-4mm}

But \(a_i - b_i \ge{} 1\), so

\begin{center}
\(\frac{a_i - b_i}{i!} \ge{} \frac{1}{i!}\).
\end{center}

In the case that \(i = k\) we get an immediate contradiction because 
equation \eqref{eqn1} tells us that \(\frac{a_i - b_i}{i!} = 0\) which is
clearly false.

So let's carry on assuming that \(i < k\) and examine
one of the terms
on the right-side of \eqref{eqn1}, say
the first one \(\frac{b_{i+1} - a_{i+1}}{(i+1)!}\). We can see that since
\(0 \le b_{i+1} \le{} i\) and \(0 \le a_{i+1} \le{} i\) that,

\begin{center}
\(\frac{i - 0}{(i+1)!} \ge{} \frac{b_{i+1} - a_{i+1}}{(i+1)!}\),
\end{center}

and hence by extension to the other terms,

\begin{center}
\(
\frac{i}{(i+1)!}
+ \frac{i+1}{(i+2)!}
+ \dots{} + \frac{k-1}{k!} \ge{}
\frac{b_{i+1} - a_{i+1}}{(i+1)!}
+ \frac{b_{i+2} - a_{i+2}}{(i+2)!}
+ \dots{} + \frac{b_k - a_k}{k!}\).
\end{center}

Furthermore, Lemma 2 tells us that \(\frac{1}{i!} > 
\frac{i}{(i+1)!}
+ \frac{i+1}{(i+2)!}
+ \dots{} + \frac{k-1}{k!}\), so
we can string all our inequalities together as follows,

\begin{center}
\(\frac{a_i - b_i}{i!} \ge{} \frac{1}{i!} > \frac{i}{(i+1)!} + \dots{} + \frac{k-1}{k!} \ge{} \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\),
\end{center}

and hence,

\begin{center}
\(\frac{a_i - b_i}{i!} > \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\),
\end{center}

But in equation \eqref{eqn1} we had deduced
that \(\frac{a_i - b_i}{i!} = \frac{b_{i+1} - a_{i+1}}{(i+1)!} + \dots{} + \frac{b_k - a_k}{k!}\)
which contradicts the strict inequality above.

Therefore our assumption that there can be a second set
of variables representing the same rational number \(\frac{p}{k!}\) must be false.
Therefore any assignment of values to the variables of the sum
\(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
produces a \emph{unique} number.

Now we can count the number of members of \(\mathcal{S}_k\), by looking at all the
possible combinations of values for the variables \(a_2, a_3, \dots{}, a_k\).
There are 2 choices for the variable \(a_2\),
combined with 3 choices for \(a_3\),
combined with 4 choices for \(a_4\),
\dots{},
combined with \(k\) choices for \(a_k\).

Therefore the total number of combinations of values
that can be assigned to all the variables of \(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
is \(2\cdot{}3\cdot{}4\cdot\cdot{}\cdot{}k = k!\,\), and since each set of assignments 
creates a \emph{unique} member of the set, then the size of \(\mathcal{S}_k\) is \(k!\,\), which
is the same size as \(\mathcal{F}_k\).
Recalling from above that any 
member of the set \(\mathcal{S}_k\), say \(\frac{a}{b}\),
can be written as \(\frac{a}{b} = \frac{p}{k!}\), for some \(p\) where 
\(0\le{}\frac{p}{k!}<1\) then
\(\mathcal{S}_k = \mathcal{F}_k\).

QED.

% \section*{Corollary to Lemma 3}
% 
% For every
% rational number \(\frac{p}{k!}\), where
% \(k \ge{} 2\) and
% \(0 \le{} \frac{p}{k!} < 1\), then
% there is a \emph{unique} sequence of integers \(a_2, a_3, \dots{} a_k\) such that,
% 
% {\small
% \bgroup                                  %% open the group
% \setlength{\abovedisplayskip}{0pt}
% \begin{center}
% \begin{equation*}
% \frac{p}{k!} = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!},
% \end{equation*}
% \end{center}
% \egroup
% }
% 
% % where \(0\! \le{}\! a_2\! <\! 2,\enspace 0\! \le{}\! a_3\! <\! 3,\enspace
% \dots{},\enspace 0\! \le{}\! a_k\! <\! k\).
%
% \subsubsection*{Proof}
% 
% The corollary is a direct result of the fact that there is a one-to-one mapping
% between the two sets.

\section*{Definitions}

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{center}
\begin{gather*}
\mathcal{F}_\infty = \lim_{n \to \infty}\mathcal{F}_n
\text{\qquad and \qquad}
\mathcal{S}_\infty = \lim_{n \to \infty}\mathcal{S}_n 
\end{gather*}
\end{center}
\egroup
}


To define what it means to be a member of \(\mathcal{F}_\infty\) we observe that
for all integers \(k \ge{} 2, \mathcal{F}_k \subset \mathcal{F}_{k+1}\) because if
\(\frac{p}{k!} \in \mathcal{F}_k\)
then \(\frac{(k+1)\cdot{}p}{(k+1)\cdot{}k!} = \frac{(k+1)\cdot{}p}{(k+1)!} \in \mathcal{F}_{k+1}\).

By induction it is straightforward to conclude that
\(\mathcal{F}_2
\subset \mathcal{F}_3
\subset \mathcal{F}_4
\subset \dots{}
\subset \mathcal{F}_{n-1}
\subset \mathcal{F}_n
\), for all \(n \ge{} 2\),
therefore \(\mathcal{F}_k \subset \mathcal{F}_{\infty}\) for all \(k \ge{} 2\).

\(a \in \mathcal{F}_\infty\) means that there exists an integer \(k \ge 2\) such that
\(a \in \mathcal{F}_k\) which carries with it the idea that it is
also a member of every larger set \(\mathcal{F}_{k+1}, \mathcal{F}_{k+2}, \dots{}\)

We define \(a \in \mathcal{S}_\infty\) in a similar way. (ELFS\footnote{Exercise Left For Student.})

\section*{Lemma 4}

The set \(\mathcal{F}_\infty\) contains all non-negative rational numbers less than one.

\subsubsection*{Proof}

% p/k is in Fk - therefor p/k is in Finf for all k. Therefor all rational numbers are in Finf.

If \(\frac{p}{k}\) is a rational number where
\(0\le{}\frac{p}{k}<1\) and \(k \ge{} 2\)
then \(\frac{p}{k} \in{} \mathcal{F}_k\) because,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{equation*}
\frac{p}{k}
= \frac{2\cdot{}3\cdot{}\cdot{}\cdot{}(k-1)}{2\cdot{}3\cdot{}\cdot{}\cdot{}(k-1)} \cdot{} \frac{p}{k}
= \frac{2\cdot{}3\cdot{}\cdot{}\cdot{}(k-1)\cdot{}p}{k!}
\end{equation*}
\egroup
}

Therefore \(\frac{p}{k}\) is an element of \(\mathcal{F}_k\), hence an element of \(\mathcal{F}_\infty\)
for all integers \(k \ge{} 2\).

% To summarize; All rational numbers \(\frac{p}{k}\) where \(k \ge{} 2\) and \(0 \le{} \frac{p}{k} < 1\) are in
% the set \(\mathcal{F}_{\infty}\)
% 
QED.

\section*{Lemma 5}

Any positive rational number \emph{less than one},
%, \(\frac{p}{q}\), where \(0 \le{} \frac{p}{q} < 1\)
can be expressed in one and only one way in the form
{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{a_2}{2!}
+ \frac{a_3}{3!}
+ \dots{}
+ \frac{a_k}{k!}
\end{equation*}
\end{center}
\egroup
}

where \(a_2, \dots{}, a_k\) are integers, and

{\small
\begin{center}
\(0\le{}a_2<2,\quad 0\le{}a_3<3,\quad \dots{},\quad 0<a_k<k\)
\end{center}
}

\subsubsection*{Proof}

Suppose \(\frac{p}{q}\) is a positive rational number less than one. We note that its 
denominator is at least 2, so by Lemma 4 we can say that
\(\frac{p}{q} \in \mathcal{F}_\infty\), and Lemma 3 tells us that
\(\mathcal{S}_k = \mathcal{F}_k\) for all \(k \ge 2\), therefore \(\frac{p}{q} \in \mathcal{S}_\infty\).

So \(\frac{p}{q} \in \mathcal{S}_n\) for some \(n \ge 2\) and the following
expression is \emph{unique} to \(\frac{p}{q}\) among all positive rational numbers less than one,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation}\label{eqn2}
\frac{p}{q} = \frac{a_2}{2!}
+ \frac{a_3}{3!}
+ \dots{}
+ \frac{a_n}{n!},
\end{equation}
\end{center}
\egroup
}

where \(0\le{}a_2<2,\quad 0\le{}a_3<3,\quad \dots{},\quad 0 \le{} a_n < n\).

We note that there must be at least one non-zero term in equation \eqref{eqn2} otherwise
the sum would be zero, and we've specified that \(\frac{p}{q}\) is positive.

Choose \(k\) such that \(a_k \ne{} 0 \) but \(a_{k+1} =
a_{k+2} =
a_{k+3} =
\dots{} = 
a_{n-1} =
a_{n} = 0\). Therefore we can rewrite equation \eqref{eqn2},

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{p}{q} = \frac{a_2}{2!}
+ \frac{a_3}{3!}
+ \dots{}
+ \frac{a_k}{k!},
\end{equation*}
\end{center}
\egroup
}

where \(0\le{}a_2<2,\quad 0\le{}a_3<3,\quad \dots{},\quad 0 < a_k < n\).

QED.

\section*{Factorial Representation Theorem (finally!)}

Any positive rational number can be expressed in one and only one way in the form

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
a_1 + \frac{a_2}{1\cdot{}2}
+ \frac{a_3}{1\cdot{}2\cdot{}3}
+ \dots{}
+ \frac{a_k}{1\cdot{}2\cdot{}3\cdot{}\dots{}\cdot{}k},
\end{equation*}
\end{center}
\egroup
}

where \(a_1, a_2, \dots{}, a_k\) are integers, and

{\small
\begin{center}
\(0\le{}a_1,\quad 0\le{}a_2<2,\quad 0\le{}a_3<3,\quad \dots{},\quad 0<a_k<k\)
\end{center}
}

\subsubsection*{Proof}

Thanks to Euclid we know that for all integers \(j\ge{}0\) and \(q>0\),
there exist \emph{unique} integers \(i\) and \(p\) such that,

{\normalsize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group
\begin{alignat*}{3}
&&j = i\cdot{}q + p\ &;\quad 0\le{}p<q \\
&\Leftrightarrow\quad &\frac{j}{q} = i + \frac{p}{q}\ &;\quad 0\le{}\frac{p}{q}<1
\end{alignat*}
\egroup
}\par
Which tells us that all positive rational numbers \(\frac{j}{q}\) can be
\emph{uniquely}
written as
an integer part, \(i\), plus a fractional part \(\frac{p}{q}\), where \(0\le{}\frac{p}{q}<1\).

% In our theorem, the \(a_1\) variable plays the role of the integer part \(i\),
% and the rest of the expression, \(\frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
% plays the role of the fractional part \(\frac{p}{q}\), where \(0\le{}\frac{p}{q}<1\).

Apply the Euclidean Division Theorem to \(\frac{j}{q}\) and let \(a_1 = i\). If there is no fractional remainder, then
the theorem has been proven.

However if there is a fractional remainder \(\frac{p}{q}\), then 
by Lemma 5 we know that the sum \(\frac{p}{q} = \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\) is
uniquely associated
with \(\frac{p}{q}\)
so clearly \(\frac{j}{q} = a_1 + \frac{a_2}{2!} + \frac{a_3}{3!} + \dots{} + \frac{a_k}{k!}\)
is uniquely associated with all positive rational numbers \(\frac{j}{q}\).

QED.

\section*{Additional Observations}

We're guaranteed that \(\frac{p}{q} \in{} \mathcal{S}_q\), but \(\mathcal{S}_q\) is not necessarily 
the smallest such set for which \(\frac{p}{q}\) is a member.

For example,
the smallest set containing \(\frac{p}{5}\), where \(0 \le{} \frac{p}{5} < 1\), is \(\mathcal{S}_5\)
however
the smallest set containing \(\frac{p}{6}\), where \(0 \le{} \frac{p}{6} < 1\) is \(\mathcal{S}_3\),
which is easy to see when we list the contents of a couple of sets,
%  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19 20, 21, 22, 23
% 24, 24, ...
%  1   1   1   1   5   1   7   1   3   5  11   1  13   7   5   2  17   3  19  5   7  11  23
% 24  12   8   6  24   4  24   3   8  12  24   2  24  12   8   3  24   4  24  6   8  12  24

{\footnotesize
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}
\begin{alignat*}{1}
\mathcal{S}_4 &= \{
\frac{ 0}{24},
\frac{ 1}{24},
\frac{ 2}{24},
\frac{ 3}{24},
\frac{ 4}{24},
\frac{ 5}{24},
\frac{ 6}{24},
\frac{ 7}{24},
\frac{ 8}{24},
\frac{ 9}{24},
\frac{10}{24},
\frac{11}{24},
\frac{12}{24},
\frac{13}{24},
\frac{14}{24},
\frac{15}{24},
\frac{16}{24},
\frac{17}{24},
\frac{18}{24},
\frac{19}{24},
\frac{20}{24},
\frac{21}{24},
\frac{22}{24},
\frac{23}{24}
\} \\
&= \{
\frac{ 0}{24},
\frac{ 1}{24},
\frac{ 1}{12},
\frac{ 1}{ 8},
\frac{ 1}{ 6},
\frac{ 5}{24},
\frac{ 1}{ 4},
\frac{ 7}{24},
\frac{ 1}{ 3},
\frac{ 3}{ 8},
\frac{ 5}{12},
\frac{11}{24},
\frac{ 1}{ 2},
\frac{13}{24},
\frac{ 7}{12},
\frac{ 5}{ 8},
\frac{ 2}{ 3},
\frac{17}{24},
\frac{ 3}{ 4},
\frac{19}{24},
\frac{ 5}{ 6},
\frac{ 7}{ 8},
\frac{11}{12},
\frac{23}{24}
\}
\end{alignat*}
\egroup
}

By examination \(\mathcal{S}_4\) doesn't contain \(\frac{1}{5}\), but it's
definitely in \(\mathcal{S}_5\) because,

{\small
\bgroup                                  %% open the group
\setlength{\abovedisplayskip}{0pt}       %% effective inside the group    
\begin{center}
\begin{equation*}
\frac{1}{5}
= \frac{0}{2}
+ \frac{1}{2\cdot{}3}
+ \frac{0}{2\cdot{}3\cdot{}4}
+ \frac{4}{2\cdot{}3\cdot{}4\cdot{}5}
= \frac{1}{6} + \frac{1}{30}
= \frac{5 + 1}{30}
= \frac{6}{30}
= \frac{1}{5}
\end{equation*}
\end{center}
\egroup
}

Also, \(
\mathcal{S}_3
= \{
\frac{ 0}{6},
\frac{ 1}{6},
\frac{ 2}{6},
\frac{ 3}{6},
\frac{ 4}{6},
\frac{ 5}{6}
\}
% = \{
% \frac{ 0}{6},
% \frac{ 1}{6},
% \frac{ 1}{3},
% \frac{ 1}{2},
% \frac{ 2}{3},
% \frac{ 5}{6}
% \}
\),
which demonstrates the claim that \(\mathcal{S}_3\)
contains \(\frac{p}{6}\),\newline where \(0 \le{} \frac{p}{6} < 1\).

I believe that for a given \(q \ge 2\) then the smallest set for which the rational number
\(\frac{p}{q} \in \mathcal{S}_k\),
is to pick
\(k\) such that it is the smallest value for which
\(q\) divides \(k!\)\! .

However, I'll leave that proof for another day.

\end{document}
